<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yoube - Radio Streaming</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom animation for player transitions - simplified */
        .player-transition {
            transition: all 0.2s ease-in-out;
        }
        
        .capsule-to-full {
            animation: expandPlayer 0.2s ease-out forwards;
        }
        
        .full-to-capsule {
            animation: collapsePlayer 0.2s ease-out forwards;
        }
        
        @keyframes expandPlayer {
            0% {
                transform: translateY(0) scale(1);
                border-radius: 9999px;
                width: 320px;
                height: 64px;
                top: 20px;
            }
            100% {
                transform: translateY(0) scale(1);
                border-radius: 0.75rem;
                width: 100%;
                height: 100%;
                top: 0;
            }
        }
        
        @keyframes collapsePlayer {
            0% {
                transform: translateY(0) scale(1);
                border-radius: 0.75rem;
                width: 100%;
                height: 100%;
                top: 0;
            }
            100% {
                transform: translateY(0) scale(1);
                border-radius: 9999px;
                width: 320px;
                height: 64px;
                top: 20px;
            }
        }
        
        /* Progress bar styling */
        .progress-bar {
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
            cursor: pointer;
        }
        
        .progress-bar::-webkit-slider-track {
            background: #4b5563;
            height: 4px;
            border-radius: 2px;
        }
        
        .progress-bar::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            background: #ec4899;
            height: 12px;
            width: 12px;
            border-radius: 50%;
            margin-top: -4px;
        }
        
        /* Hide scrollbar for sidebar */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        /* Loading animation - simplified */
        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid #ec4899;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Category card hover effect - simplified */
        .category-card {
            transition: transform 0.15s ease-in-out;
        }
        
        .category-card:hover {
            transform: translateY(-2px);
        }
        
        /* Station card hover effect - simplified */
        .station-card {
            transition: background-color 0.15s ease-in-out;
        }
        
        .station-card:hover {
            background-color: rgba(55, 65, 81, 0.8);
        }
        
        /* Autocomplete dropdown */
        .autocomplete-dropdown {
            max-height: 300px;
            overflow-y: auto;
        }
        
        /* Active navigation item */
        .nav-active {
            color: #ec4899;
        }
        
        /* Gradient background - Updated to black-green-red */
        .gradient-bg {
            background: linear-gradient(135deg, #000000, #003300, #800000);
            background-size: 200% 200%;
            animation: gradientShift 15s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1f2937;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
        
        /* Custom styles for responsive layout */
        .content-wrapper {
            padding-bottom: 80px; /* Space for bottom navigation on mobile */
        }
        
        @media (min-width: 1024px) {
            .content-wrapper {
                padding-bottom: 0; /* No extra padding on desktop */
            }
        }
        
        /* Search page padding to avoid capsule player overlap */
        #search-page {
            padding-top: 90px; /* Space for capsule player */
        }
        
        @media (min-width: 1024px) {
            #search-page {
                padding-top: 30px; /* Less space needed on desktop */
            }
        }
        
        /* Ensure text truncation works properly */
        .truncate-text {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 100%;
        }
        
        /* Recommendation cards in full player - simplified */
        .recommendation-card {
            transition: background-color 0.15s ease-in-out;
        }
        
        .recommendation-card:hover {
            background-color: rgba(55, 65, 81, 0.8);
        }
        
        /* Image slider styles - IMPROVED */
        .slider-container {
            position: relative;
            overflow: hidden;
            border-radius: 1rem;
            height: 300px; /* Reduced height */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .slider {
            display: flex;
            transition: transform 0.5s ease;
            height: 100%;
        }
        
        .slide {
            min-width: 100%;
            position: relative;
            background-size: cover;
            background-position: center;
        }
        
        .slide::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0.4), rgba(0,0,0,0.1));
            z-index: 1;
        }
        
        .slide-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 2rem; /* Reduced padding */
            color: white;
            z-index: 2;
        }
        
        .slide-content h3 {
            font-size: 2rem; /* Reduced font size */
            font-weight: 700;
            margin-bottom: 0.75rem; /* Reduced margin */
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }
        
        .slide-content p {
            font-size: 1rem; /* Reduced font size */
            margin-bottom: 1rem; /* Reduced margin */
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
        }
        
        .slide-content button {
            background: linear-gradient(90deg, #ec4899, #8b5cf6);
            border: none;
            color: white;
            padding: 0.5rem 1.25rem; /* Reduced padding */
            border-radius: 2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s; /* Reduced transition */
            box-shadow: 0 4px 15px rgba(236, 72, 153, 0.4);
        }
        
        .slide-content button:hover {
            transform: translateY(-1px); /* Reduced transform */
            box-shadow: 0 6px 20px rgba(236, 72, 153, 0.6);
        }
        
        .slider-dots {
            display: flex;
            justify-content: center;
            margin-top: 1rem; /* Reduced margin */
            gap: 0.5rem;
        }
        
        .dot {
            width: 10px; /* Reduced size */
            height: 10px; /* Reduced size */
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.2s; /* Reduced transition */
        }
        
        .dot.active {
            background: #ec4899;
            transform: scale(1.1);
        }
        
        .slider-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 36px; /* Reduced size */
            height: 36px; /* Reduced size */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 3;
            transition: all 0.2s; /* Reduced transition */
        }
        
        .slider-nav:hover {
            background: rgba(0, 0, 0, 0.8);
        }
        
        .slider-prev {
            left: 1rem;
        }
        
        .slider-next {
            right: 1rem;
        }
        
        /* Sleep timer styles */
        .sleep-timer-container {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 10;
        }
        
        .sleep-timer-btn {
            background: rgba(0, 0, 0, 0.6);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        
        .sleep-timer-btn:hover {
            background: rgba(0, 0, 0, 0.8);
        }
        
        .sleep-timer-options {
            position: absolute;
            bottom: 100%;
            right: 0;
            background: #2d3748;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: none;
            min-width: 150px;
        }
        
        .sleep-timer-options.show {
            display: block;
        }
        
        .sleep-timer-option {
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 4px;
            transition: background 0.2s;
        }
        
        .sleep-timer-option:hover {
            background: #4a5568;
        }
        
        /* Volume control styles */
        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .volume-slider {
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
            cursor: pointer;
            flex: 1;
        }
        
        .volume-slider::-webkit-slider-track {
            background: #4b5563;
            height: 4px;
            border-radius: 2px;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            background: #ec4899;
            height: 12px;
            width: 12px;
            border-radius: 50%;
            margin-top: -4px;
        }
        
        /* Share button styles */
        .share-btn {
            background: rgba(0, 0, 0, 0.6);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            margin-left: 10px;
        }
        
        .share-btn:hover {
            background: rgba(0, 0, 0, 0.8);
        }
        
        /* Country selector styles */
        .country-selector {
            margin-bottom: 20px;
        }
        
        .country-dropdown {
            background: #2d3748;
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            width: 100%;
            cursor: pointer;
        }
        
        /* Media notification styles */
        .media-notification {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px 25px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .media-notification.show {
            opacity: 1;
        }
        
        .media-notification img {
            width: 50px;
            height: 50px;
            border-radius: 8px;
        }
        
        .media-notification-content {
            flex: 1;
        }
        
        .media-notification-title {
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .media-notification-artist {
            font-size: 14px;
            color: #a0aec0;
        }
        
        .media-notification-close {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
        }
        
        /* Audio Visualizer - simplified */
        .visualizer {
            display: flex;
            align-items: flex-end;
            height: 40px; /* Reduced height */
            gap: 3px;
            margin: 15px 0; /* Reduced margin */
        }
        
        .visualizer-bar {
            width: 4px;
            background: linear-gradient(to top, #ec4899, #8b5cf6);
            border-radius: 2px;
            animation: visualizer 1.5s ease-in-out infinite;
        }
        
        @keyframes visualizer {
            0%, 100% { height: 10px; }
            50% { height: 30px; } /* Reduced height */
        }
        
        /* Lyrics Display */
        .lyrics-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 15px; /* Reduced padding */
            margin: 15px 0; /* Reduced margin */
            max-height: 150px; /* Reduced height */
            overflow-y: auto;
            text-align: center;
            font-style: italic;
            line-height: 1.6; /* Reduced line height */
        }
        
        /* Podcast Section - simplified */
        .podcast-card {
            background: linear-gradient(135deg, #2d3748, #4a5568);
            border-radius: 12px;
            padding: 16px;
            transition: transform 0.2s; /* Reduced transition */
        }
        
        .podcast-card:hover {
            transform: translateY(-3px); /* Reduced transform */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        /* User Profile */
        .profile-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ec4899, #8b5cf6);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            margin: 0 auto 16px;
        }
        
        /* Radio Schedule */
        .schedule-card {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid #ec4899;
            padding: 16px;
            margin-bottom: 12px;
            border-radius: 0 8px 8px 0;
            transition: background 0.2s;
        }
        
        .schedule-card:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Social Features - simplified */
        .social-actions {
            display: flex;
            gap: 16px;
            margin-top: 16px;
        }
        
        .social-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.2s; /* Reduced transition */
        }
        
        .social-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* Advanced Search Filters */
        .filter-chip {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .filter-chip:hover, .filter-chip.active {
            background: #ec4899;
            border-color: #ec4899;
        }
        
        /* Mini Player */
        .mini-player {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 300px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            z-index: 40;
            transition: transform 0.3s, opacity 0.3s;
        }
        
        .mini-player.hidden {
            transform: translateY(120%);
            opacity: 0;
        }
        
        /* Theme Customization */
        .theme-options {
            display: flex;
            gap: 12px;
            margin: 20px 0;
        }
        
        .theme-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .theme-option:hover, .theme-option.active {
            border-color: white;
            transform: scale(1.1);
        }
        
        /* Audio Effects */
        .effects-panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 15px; /* Reduced padding */
            margin: 15px 0; /* Reduced margin */
        }
        
        .effect-slider {
            margin: 12px 0; /* Reduced margin */
        }
        
        .effect-slider label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px; /* Reduced margin */
            font-size: 14px;
        }
        
        /* Radio Recording */
        .recording-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #ef4444;
            font-weight: bold;
        }
        
        .recording-dot {
            width: 12px;
            height: 12px;
            background: #ef4444;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, #ec4899, #8b5cf6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(236, 72, 153, 0.4);
            transition: all 0.3s;
            z-index: 30;
        }
        
        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(236, 72, 153, 0.6);
        }
        
        /* Quick Actions Menu */
        .quick-actions {
            position: fixed;
            bottom: 170px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: flex-end;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s;
            z-index: 25;
        }
        
        .quick-actions.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .quick-action-btn {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border: none;
            color: white;
            padding: 12px 20px;
            border-radius: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
        }
        
        .quick-action-btn:hover {
            background: rgba(0, 0, 0, 0.9);
            transform: translateX(-5px);
        }
        
        /* Glassmorphism Effects */
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Neon Effects */
        .neon-text {
            text-shadow: 0 0 10px rgba(236, 72, 153, 0.8),
                         0 0 20px rgba(236, 72, 153, 0.6),
                         0 0 30px rgba(236, 72, 153, 0.4);
        }
        
        /* Loading Skeleton */
        .skeleton {
            background: linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Responsive Grid Improvements */
        .responsive-grid {
            display: grid;
            gap: 1.5rem;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        }
        
        /* Enhanced Cards - simplified */
        .enhanced-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.2s; /* Reduced transition */
        }
        
        .enhanced-card:hover {
            transform: translateY(-4px); /* Reduced transform */
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border-color: rgba(236, 72, 153, 0.5);
        }
        
        /* Playlist Styles */
        .playlist-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .playlist-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .playlist-title {
            font-size: 1.25rem;
            font-weight: 700;
        }
        
        .playlist-actions {
            display: flex;
            gap: 10px;
        }
        
        .playlist-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .playlist-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .playlist-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            transition: background 0.2s;
            cursor: pointer;
        }
        
        .playlist-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .playlist-item.active {
            background: rgba(236, 72, 153, 0.2);
        }
        
        .playlist-item-img {
            width: 40px;
            height: 40px;
            border-radius: 4px;
            margin-right: 12px;
        }
        
        .playlist-item-info {
            flex: 1;
            min-width: 0;
        }
        
        .playlist-item-title {
            font-weight: 600;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .playlist-item-artist {
            font-size: 0.875rem;
            color: #a0aec0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .playlist-item-duration {
            font-size: 0.875rem;
            color: #a0aec0;
            margin-left: 12px;
        }
        
        .playlist-item-remove {
            background: none;
            border: none;
            color: #a0aec0;
            cursor: pointer;
            margin-left: 12px;
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        .playlist-item:hover .playlist-item-remove {
            opacity: 1;
        }
        
        .playlist-item-remove:hover {
            color: #ef4444;
        }
        
        .create-playlist-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }
        
        .create-playlist-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .playlist-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .playlist-modal.show {
            opacity: 1;
            visibility: visible;
        }
        
        .playlist-modal-content {
            background: #1f2937;
            border-radius: 16px;
            padding: 24px;
            width: 90%;
            max-width: 500px;
            transform: scale(0.9);
            transition: transform 0.3s;
        }
        
        .playlist-modal.show .playlist-modal-content {
            transform: scale(1);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: #a0aec0;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .modal-close:hover {
            color: white;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .form-input {
            width: 100%;
            padding: 10px 14px;
            background: #374151;
            border: 1px solid #4b5563;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: border-color 0.2s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #ec4899;
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            margin-top: 24px;
        }
        
        .modal-btn {
            padding: 10px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .modal-btn-secondary {
            background: transparent;
            border: 1px solid #4b5563;
            color: white;
        }
        
        .modal-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .modal-btn-primary {
            background: #ec4899;
            border: none;
            color: white;
        }
        
        .modal-btn-primary:hover {
            background: #db2777;
        }
        
        .add-to-playlist-btn {
            background: rgba(236, 72, 153, 0.2);
            border: 1px solid #ec4899;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .add-to-playlist-btn:hover {
            background: rgba(236, 72, 153, 0.3);
        }
        
        .playlist-select-modal {
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .playlist-select-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .playlist-select-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .playlist-select-checkbox {
            margin-right: 12px;
        }
        
        .playlist-select-info {
            flex: 1;
        }
        
        .playlist-select-title {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .playlist-select-count {
            font-size: 0.875rem;
            color: #a0aec0;
        }
        
        /* Capsule player adjustments */
        .capsule-player-adjusted {
            margin-top: 90px; /* Add space for capsule player */
        }
        
        /* Reduced motion for better performance */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
            
            .gradient-bg {
                animation: none;
            }
            
            .loading-spinner {
                animation: none;
            }
            
            .visualizer-bar {
                animation: none;
            }
            
            .recording-dot {
                animation: none;
            }
        }
        
        /* Low device adjustments */
        .low-device .gradient-bg {
            background: linear-gradient(135deg, #000000, #003300, #800000);
            animation: none;
        }
        
        .low-device .particles {
            display: none;
        }
        
        .low-device .interactive-bg {
            display: none;
        }
        
        .low-device .visualizer {
            display: none;
        }
        
        .low-device .neon-text {
            text-shadow: none;
        }
        
        .low-device .slider-container {
            height: 200px;
        }
        
        .low-device .slide-content h3 {
            font-size: 1.5rem;
        }
        
        .low-device .slide-content p {
            font-size: 0.9rem;
        }
        
        .low-device .enhanced-card:hover {
            transform: none;
        }
        
        .low-device .category-card:hover {
            transform: none;
        }
        
        .low-device .podcast-card:hover {
            transform: none;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen gradient-bg">
    <!-- Interactive Background - Hidden on low devices -->
    <div class="interactive-bg" id="interactive-bg">
        <div class="bg-shape" style="width: 300px; height: 300px; background: #ec4899; top: 10%; left: 10%;"></div>
        <div class="bg-shape" style="width: 400px; height: 400px; background: #8b5cf6; top: 60%; right: 10%; animation-delay: -5s;"></div>
        <div class="bg-shape" style="width: 250px; height: 250px; background: #10b981; bottom: 10%; left: 30%; animation-delay: -10s;"></div>
    </div>

    <!-- Particles Background - Hidden on low devices -->
    <div class="particles" id="particles"></div>

    <!-- Sidebar for Desktop -->
    <div class="hidden lg:block fixed left-0 top-0 h-full w-64 glass z-40">
        <div class="p-6">
            <h1 class="text-2xl font-bold text-pink-400 mb-10 neon-text">Yoube</h1>
            <nav>
                <ul class="space-y-4">
                    <li>
                        <a href="#" data-page="home" class="nav-link flex items-center space-x-3 text-white hover:text-pink-400 transition-colors nav-active">
                            <i class="fas fa-home w-6"></i>
                            <span>Home</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="search" class="nav-link flex items-center space-x-3 text-white hover:text-pink-400 transition-colors">
                            <i class="fas fa-search w-6"></i>
                            <span>Search</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="favorite" class="nav-link flex items-center space-x-3 text-white hover:text-pink-400 transition-colors">
                            <i class="fas fa-heart w-6"></i>
                            <span>Favorite</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="recent" class="nav-link flex items-center space-x-3 text-white hover:text-pink-400 transition-colors">
                            <i class="fas fa-history w-6"></i>
                            <span>Recent</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="countries" class="nav-link flex items-center space-x-3 text-white hover:text-pink-400 transition-colors">
                            <i class="fas fa-globe w-6"></i>
                            <span>Countries</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="podcast" class="nav-link flex items-center space-x-3 text-white hover:text-pink-400 transition-colors">
                            <i class="fas fa-podcast w-6"></i>
                            <span>Podcast</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="schedule" class="nav-link flex items-center space-x-3 text-white hover:text-pink-400 transition-colors">
                            <i class="fas fa-calendar-alt w-6"></i>
                            <span>Schedule</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="profile" class="nav-link flex items-center space-x-3 text-white hover:text-pink-400 transition-colors">
                            <i class="fas fa-user w-6"></i>
                            <span>Profile</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="playlist" class="nav-link flex items-center space-x-3 text-white hover:text-pink-400 transition-colors">
                            <i class="fas fa-list-music w-6"></i>
                            <span>Playlist</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="mt-10">
                <h3 class="text-sm font-semibold text-gray-400 mb-4">PLAYLISTS</h3>
                <ul class="space-y-2" id="sidebar-playlists">
                    <!-- Playlists will be loaded here -->
                </ul>
            </div>
            
            <!-- Theme Options -->
            <div class="mt-10">
                <h3 class="text-sm font-semibold text-gray-400 mb-4">THEME</h3>
                <div class="theme-options">
                    <div class="theme-option active" style="background: linear-gradient(135deg, #000, #003300, #800000);" data-theme="default"></div>
                    <div class="theme-option" style="background: linear-gradient(135deg, #1e3a8a, #7e22ce);" data-theme="purple"></div>
                    <div class="theme-option" style="background: linear-gradient(135deg, #065f46, #0891b2);" data-theme="teal"></div>
                    <div class="theme-option" style="background: linear-gradient(135deg, #7c2d12, #ea580c);" data-theme="orange"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="lg:ml-64 content-wrapper">
        <!-- Home Page -->
        <div id="home-page" class="page">
            <div class="container mx-auto px-4 py-8">
                <!-- Welcome Section with User Info -->
                <div class="mb-8 flex justify-between items-center">
                    <div>
                        <h1 class="text-3xl font-bold mb-2">Good morning, <span id="user-name">User</span></h1>
                        <p class="text-gray-400">What do you want to listen to?</p>
                    </div>
                    <div class="hidden md:flex items-center space-x-4">
                        <div class="text-right">
                            <p class="text-sm text-gray-400">Listening Time</p>
                            <p class="font-semibold" id="listening-time">2h 34m</p>
                        </div>
                        <div class="w-12 h-12 rounded-full holographic flex items-center justify-center">
                            <i class="fas fa-user text-white"></i>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Stats -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <div class="glass rounded-lg p-4 text-center">
                        <i class="fas fa-fire text-2xl text-orange-500 mb-2"></i>
                        <p class="text-2xl font-bold" id="streak-count">7</p>
                        <p class="text-sm text-gray-400">Day Streak</p>
                    </div>
                    <div class="glass rounded-lg p-4 text-center">
                        <i class="fas fa-headphones text-2xl text-blue-500 mb-2"></i>
                        <p class="text-2xl font-bold" id="stations-count">24</p>
                        <p class="text-sm text-gray-400">Stations Played</p>
                    </div>
                    <div class="glass rounded-lg p-4 text-center">
                        <i class="fas fa-clock text-2xl text-green-500 mb-2"></i>
                        <p class="text-2xl font-bold" id="hours-count">12</p>
                        <p class="text-sm text-gray-400">Hours This Week</p>
                    </div>
                    <div class="glass rounded-lg p-4 text-center">
                        <i class="fas fa-trophy text-2xl text-yellow-500 mb-2"></i>
                        <p class="text-2xl font-bold" id="rank-count">#42</p>
                        <p class="text-sm text-gray-400">Global Rank</p>
                    </div>
                </div>
                
                <!-- Image Slider -->
                <div class="mb-10">
                    <div class="slider-container">
                        <div id="image-slider" class="slider">
                            <!-- Slides will be added dynamically -->
                        </div>
                        <button class="slider-nav slider-prev" id="slider-prev">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="slider-nav slider-next" id="slider-next">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <div id="slider-dots" class="slider-dots">
                        <!-- Dots will be added dynamically -->
                    </div>
                </div>
                
                <!-- Categories Section -->
                <div class="mb-10">
                    <h2 class="text-2xl font-bold mb-6">Browse Categories</h2>
                    <div id="categories" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
                        <!-- Categories will be loaded here -->
                    </div>
                </div>
                
                <!-- Popular Stations Section -->
                <div class="mb-10">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Popular Stations</h2>
                        <a href="#" data-page="see-all" data-type="popular" class="text-sm text-gray-400 hover:text-white">SEE ALL</a>
                    </div>
                    <div id="popular-stations" class="responsive-grid">
                        <!-- Popular stations will be loaded here -->
                    </div>
                </div>
                
                <!-- Recommended by Genre Section -->
                <div class="mb-10">
                    <h2 class="text-2xl font-bold mb-6">Recommended by Genre</h2>
                    <div id="genre-recommendations" class="space-y-8">
                        <!-- Genre recommendations will be loaded here -->
                    </div>
                </div>
                
                <!-- Podcast Section -->
                <div class="mb-10">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Popular Podcasts</h2>
                        <a href="#" data-page="podcast" class="text-sm text-gray-400 hover:text-white">SEE ALL</a>
                    </div>
                    <div id="podcast-section" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Podcasts will be loaded here -->
                    </div>
                </div>
                
                <!-- Live Now Section -->
                <div class="mb-10">
                    <h2 class="text-2xl font-bold mb-6">Live Now</h2>
                    <div id="live-now" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Live stations will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Search Page -->
        <div id="search-page" class="page hidden">
            <div class="container mx-auto px-4">
                <div class="max-w-2xl mx-auto">
                    <!-- Search Bar with Autocomplete -->
                    <div class="relative mb-8">
                        <div class="relative">
                            <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input 
                                type="text" 
                                id="search-input" 
                                placeholder="What do you want to listen to?"
                                class="w-full bg-gray-800 rounded-full py-3 pl-12 pr-4 focus:outline-none focus:ring-2 focus:ring-pink-500"
                            >
                        </div>
                        <div id="autocomplete-dropdown" class="absolute top-full left-0 right-0 mt-2 bg-gray-800 rounded-lg shadow-lg hidden autocomplete-dropdown">
                            <!-- Autocomplete results will be shown here -->
                        </div>
                    </div>
                    
                    <!-- Advanced Filters -->
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold mb-3">Filters</h3>
                        <div class="flex flex-wrap gap-2">
                            <div class="filter-chip active" data-filter="all">All</div>
                            <div class="filter-chip" data-filter="music">Music</div>
                            <div class="filter-chip" data-filter="talk">Talk</div>
                            <div class="filter-chip" data-filter="news">News</div>
                            <div class="filter-chip" data-filter="sports">Sports</div>
                            <div class="filter-chip" data-filter="high-quality">High Quality</div>
                        </div>
                    </div>
                    
                    <!-- Search Results -->
                    <div id="search-results" class="hidden">
                        <h3 class="text-xl font-bold mb-4">Search Results</h3>
                        <div id="search-results-container" class="space-y-4">
                            <!-- Search results will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- Recent Searches -->
                    <div id="recent-searches" class="mb-8">
                        <h3 class="text-xl font-bold mb-4">Recent Searches</h3>
                        <div id="recent-searches-container" class="flex flex-wrap gap-2">
                            <!-- Recent searches will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- Browse All -->
                    <div>
                        <h3 class="text-xl font-bold mb-4">Browse All</h3>
                        <div id="browse-all" class="grid grid-cols-2 md:grid-cols-3 gap-4">
                            <!-- Browse categories will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Favorite Page -->
        <div id="favorite-page" class="page hidden">
            <div class="container mx-auto px-4 py-8">
                <h1 class="text-3xl font-bold mb-8">Your Favorite Stations</h1>
                <div id="favorite-stations" class="responsive-grid">
                    <!-- Favorite stations will be loaded here -->
                </div>
                <div id="no-favorites" class="text-center py-20 hidden">
                    <i class="fas fa-heart text-6xl text-gray-600 mb-4"></i>
                    <p class="text-xl text-gray-400">No favorite stations yet</p>
                    <p class="text-gray-500 mt-2">Click the heart icon on any station to add it to your favorites</p>
                </div>
            </div>
        </div>

        <!-- Recent Page -->
        <div id="recent-page" class="page hidden">
            <div class="container mx-auto px-4 py-8">
                <h1 class="text-3xl font-bold mb-8">Recently Played</h1>
                <div id="recent-stations" class="space-y-4">
                    <!-- Recent stations will be loaded here -->
                </div>
                <div id="no-recent" class="text-center py-20 hidden">
                    <i class="fas fa-history text-6xl text-gray-600 mb-4"></i>
                    <p class="text-xl text-gray-400">No recently played stations</p>
                    <p class="text-gray-500 mt-2">Start listening to see your history here</p>
                </div>
            </div>
        </div>

        <!-- Countries Page -->
        <div id="countries-page" class="page hidden">
            <div class="container mx-auto px-4 py-8">
                <h1 class="text-3xl font-bold mb-8">Browse by Country</h1>
                
                <div class="country-selector mb-8">
                    <select id="country-select" class="country-dropdown">
                        <option value="">Select a country</option>
                        <!-- Countries will be loaded here -->
                    </select>
                </div>
                
                <div id="country-stations" class="responsive-grid">
                    <!-- Country stations will be loaded here -->
                </div>
                <div id="no-country-stations" class="text-center py-20 hidden">
                    <i class="fas fa-globe text-6xl text-gray-600 mb-4"></i>
                    <p class="text-xl text-gray-400">Select a country to view stations</p>
                </div>
            </div>
        </div>

        <!-- Podcast Page -->
        <div id="podcast-page" class="page hidden">
            <div class="container mx-auto px-4 py-8">
                <h1 class="text-3xl font-bold mb-8">Podcasts</h1>
                
                <!-- Podcast Categories -->
                <div class="mb-8">
                    <div class="flex flex-wrap gap-2">
                        <div class="filter-chip active">All</div>
                        <div class="filter-chip">Comedy</div>
                        <div class="filter-chip">News</div>
                        <div class="filter-chip">Education</div>
                        <div class="filter-chip">Technology</div>
                        <div class="filter-chip">Business</div>
                    </div>
                </div>
                
                <div id="podcast-list" class="responsive-grid">
                    <!-- Podcasts will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Schedule Page -->
        <div id="schedule-page" class="page hidden">
            <div class="container mx-auto px-4 py-8">
                <h1 class="text-3xl font-bold mb-8">Radio Schedule</h1>
                
                <!-- Date Selector -->
                <div class="mb-8">
                    <div class="flex items-center space-x-4">
                        <button class="bg-gray-800 hover:bg-gray-700 p-2 rounded-lg">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2 class="text-xl font-semibold" id="schedule-date">Today, March 15</h2>
                        <button class="bg-gray-800 hover:bg-gray-700 p-2 rounded-lg">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                
                <div id="schedule-list">
                    <!-- Schedule items will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Profile Page -->
        <div id="profile-page" class="page hidden">
            <div class="container mx-auto px-4 py-8">
                <div class="max-w-4xl mx-auto">
                    <!-- Profile Header -->
                    <div class="profile-card mb-8">
                        <div class="profile-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-center mb-2" id="profile-name">John Doe</h2>
                        <p class="text-gray-400 text-center mb-6" id="profile-email">john.doe@example.com</p>
                        
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div>
                                <p class="text-2xl font-bold" id="profile-favorites">24</p>
                                <p class="text-sm text-gray-400">Favorites</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold" id="profile-playlists">5</p>
                                <p class="text-sm text-gray-400">Playlists</p>
                            </div>
                            <div>
                                <p class="text-2xl font-bold" id="profile-hours">156</p>
                                <p class="text-sm text-gray-400">Hours</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Settings Section -->
                    <div class="glass rounded-lg p-6 mb-8">
                        <h3 class="text-xl font-bold mb-4">Settings</h3>
                        
                        <div class="space-y-4">
                            <div class="flex justify-between items-center">
                                <span>Auto Play</span>
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider round"></span>
                                </label>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <span>Explicit Content</span>
                                <label class="switch">
                                    <input type="checkbox">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <span>Audio Quality</span>
                                <select class="bg-gray-800 rounded px-3 py-1">
                                    <option>High</option>
                                    <option>Medium</option>
                                    <option>Low</option>
                                </select>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <span>Streaming Quality</span>
                                <select class="bg-gray-800 rounded px-3 py-1">
                                    <option>Auto</option>
                                    <option>320kbps</option>
                                    <option>256kbps</option>
                                    <option>128kbps</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Account Actions -->
                    <div class="space-y-3">
                        <button class="w-full bg-gray-800 hover:bg-gray-700 py-3 rounded-lg text-left px-4">
                            <i class="fas fa-edit mr-3"></i> Edit Profile
                        </button>
                        <button class="w-full bg-gray-800 hover:bg-gray-700 py-3 rounded-lg text-left px-4">
                            <i class="fas fa-download mr-3"></i> Download Data
                        </button>
                        <button class="w-full bg-red-900 hover:bg-red-800 py-3 rounded-lg text-left px-4">
                            <i class="fas fa-sign-out-alt mr-3"></i> Logout
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Playlist Page -->
        <div id="playlist-page" class="page hidden">
            <div class="container mx-auto px-4 py-8">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-3xl font-bold">Your Playlists</h1>
                    <button id="create-new-playlist" class="bg-pink-500 hover:bg-pink-600 px-4 py-2 rounded-lg flex items-center">
                        <i class="fas fa-plus mr-2"></i> New Playlist
                    </button>
                </div>
                
                <div id="playlist-container">
                    <!-- Playlists will be loaded here -->
                </div>
                
                <div id="no-playlists" class="text-center py-20 hidden">
                    <i class="fas fa-list-music text-6xl text-gray-600 mb-4"></i>
                    <p class="text-xl text-gray-400">No playlists yet</p>
                    <p class="text-gray-500 mt-2">Create your first playlist to get started</p>
                </div>
            </div>
        </div>

        <!-- See All Page -->
        <div id="see-all-page" class="page hidden">
            <div class="container mx-auto px-4 py-8">
                <div class="flex items-center mb-8">
                    <button id="back-from-see-all" class="mr-4">
                        <i class="fas fa-arrow-left text-xl"></i>
                    </button>
                    <h1 id="see-all-title" class="text-3xl font-bold">All Stations</h1>
                </div>
                
                <div id="see-all-stations" class="responsive-grid">
                    <!-- Stations will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Capsule Player -->
    <div id="capsule-player" class="fixed left-1/2 transform -translate-x-1/2 top-5 z-50 glass rounded-full w-80 h-16 flex items-center px-4 shadow-lg cursor-pointer player-transition">
        <button id="play-pause-btn" class="bg-pink-500 hover:bg-pink-600 rounded-full w-10 h-10 flex items-center justify-center mr-3">
            <i class="fas fa-play text-white"></i>
        </button>
        <div class="flex-1 truncate">
            <div id="now-playing-title" class="font-semibold truncate-text">Select a station</div>
            <div id="now-playing-artist" class="text-sm text-gray-400 truncate-text">No station playing</div>
        </div>
        <button id="favorite-btn" class="ml-3 text-gray-400 hover:text-pink-500">
            <i class="far fa-heart"></i>
        </button>
    </div>

    <!-- Full Player (Hidden by default) -->
    <div id="full-player" class="fixed inset-0 bg-gray-900 z-50 hidden">
        <div class="h-full flex flex-col">
            <!-- Header -->
            <div class="p-4 flex justify-between items-center">
                <button id="back-to-capsule" class="text-white">
                    <i class="fas fa-chevron-down text-xl"></i>
                </button>
                <span class="font-semibold">Now Playing</span>
                <div class="flex items-center">
                    <button id="share-btn" class="share-btn">
                        <i class="fas fa-share-alt"></i>
                    </button>
                    <button id="add-to-playlist-btn" class="ml-3 text-gray-400 hover:text-pink-500">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button id="full-player-favorite-btn" class="ml-3 text-gray-400 hover:text-pink-500">
                        <i class="far fa-heart text-xl"></i>
                    </button>
                </div>
            </div>
            
            <!-- Album Art with 3D Effect -->
            <div class="flex-1 flex items-center justify-center p-8">
                <div class="card-3d">
                    <div class="card-3d-inner">
                        <img id="album-art" src="https://via.placeholder.com/300" alt="Album Art" class="w-64 h-64 rounded-lg shadow-xl">
                    </div>
                </div>
            </div>
            
            <!-- Audio Visualizer -->
            <div class="px-8">
                <div class="visualizer" id="visualizer">
                    <div class="visualizer-bar" style="animation-delay: 0s;"></div>
                    <div class="visualizer-bar" style="animation-delay: 0.1s;"></div>
                    <div class="visualizer-bar" style="animation-delay: 0.2s;"></div>
                    <div class="visualizer-bar" style="animation-delay: 0.3s;"></div>
                    <div class="visualizer-bar" style="animation-delay: 0.4s;"></div>
                    <div class="visualizer-bar" style="animation-delay: 0.5s;"></div>
                    <div class="visualizer-bar" style="animation-delay: 0.6s;"></div>
                    <div class="visualizer-bar" style="animation-delay: 0.7s;"></div>
                    <div class="visualizer-bar" style="animation-delay: 0.8s;"></div>
                    <div class="visualizer-bar" style="animation-delay: 0.9s;"></div>
                </div>
            </div>
            
            <!-- Song Info -->
            <div class="px-8 pb-4">
                <h3 id="full-player-title" class="text-xl font-bold truncate-text">Select a station</h3>
                <p id="full-player-artist" class="text-gray-400 truncate-text">No station playing</p>
            </div>
            
            <!-- Lyrics Display -->
            <div class="px-8 pb-4">
                <div class="lyrics-container" id="lyrics-container">
                    <p id="lyrics-text">No lyrics available</p>
                </div>
            </div>
            
            <!-- Progress Bar -->
            <div class="px-8 pb-6">
                <div class="flex items-center justify-between text-sm text-gray-400 mb-1">
                    <span id="current-time">0:00</span>
                    <span id="total-time">0:00</span>
                </div>
                <input type="range" id="progress-bar" class="progress-bar w-full" min="0" max="100" value="0">
            </div>
            
            <!-- Audio Effects Panel -->
            <div class="px-8 pb-4">
                <div class="effects-panel">
                    <h4 class="font-semibold mb-3">Audio Effects</h4>
                    
                    <div class="effect-slider">
                        <label>
                            <span>Bass Boost</span>
                            <span id="bass-value">0%</span>
                        </label>
                        <input type="range" id="bass-slider" class="w-full" min="0" max="100" value="0">
                    </div>
                    
                    <div class="effect-slider">
                        <label>
                            <span>Virtualizer</span>
                            <span id="virtualizer-value">0%</span>
                        </label>
                        <input type="range" id="virtualizer-slider" class="w-full" min="0" max="100" value="0">
                    </div>
                    
                    <div class="effect-slider">
                        <label>
                            <span>Equalizer</span>
                            <span id="equalizer-value">0%</span>
                        </label>
                        <input type="range" id="equalizer-slider" class="w-full" min="0" max="100" value="0">
                    </div>
                </div>
            </div>
            
            <!-- Volume Control -->
            <div class="px-8 pb-4">
                <div class="volume-control">
                    <i class="fas fa-volume-up"></i>
                    <input type="range" id="volume-slider" class="volume-slider" min="0" max="100" value="70">
                    <span id="volume-value">70%</span>
                </div>
            </div>
            
            <!-- Controls -->
            <div class="flex justify-center items-center space-x-8 pb-6">
                <button id="prev-btn" class="text-gray-400 hover:text-white">
                    <i class="fas fa-step-backward text-xl"></i>
                </button>
                <button id="full-player-play-pause" class="bg-pink-500 hover:bg-pink-600 rounded-full w-16 h-16 flex items-center justify-center glow-btn">
                    <i class="fas fa-play text-white text-xl"></i>
                </button>
                <button id="next-btn" class="text-gray-400 hover:text-white">
                    <i class="fas fa-step-forward text-xl"></i>
                </button>
            </div>
            
            <!-- Recording Indicator -->
            <div class="px-8 pb-4" id="recording-indicator" style="display: none;">
                <div class="recording-indicator">
                    <div class="recording-dot"></div>
                    <span>Recording...</span>
                    <button id="stop-recording" class="ml-4 text-red-500">
                        <i class="fas fa-stop-circle"></i>
                    </button>
                </div>
            </div>
            
            <!-- Sleep Timer -->
            <div class="sleep-timer-container">
                <button id="sleep-timer-btn" class="sleep-timer-btn">
                    <i class="fas fa-moon"></i>
                    <span id="sleep-timer-text">Sleep Timer</span>
                </button>
                <div id="sleep-timer-options" class="sleep-timer-options">
                    <div class="sleep-timer-option" data-minutes="5">5 minutes</div>
                    <div class="sleep-timer-option" data-minutes="10">10 minutes</div>
                    <div class="sleep-timer-option" data-minutes="15">15 minutes</div>
                    <div class="sleep-timer-option" data-minutes="30">30 minutes</div>
                    <div class="sleep-timer-option" data-minutes="60">1 hour</div>
                    <div class="sleep-timer-option" data-minutes="0">Off</div>
                </div>
            </div>
            
            <!-- Social Actions -->
            <div class="px-8 pb-8">
                <div class="social-actions">
                    <button class="social-btn">
                        <i class="fas fa-thumbs-up"></i>
                        <span>Like</span>
                    </button>
                    <button class="social-btn">
                        <i class="fas fa-comment"></i>
                        <span>Comment</span>
                    </button>
                    <button class="social-btn">
                        <i class="fas fa-share"></i>
                        <span>Share</span>
                    </button>
                </div>
            </div>
            
            <!-- Recommendations Section -->
            <div class="px-8 pb-8">
                <h3 class="text-lg font-semibold mb-4">Recommended Stations</h3>
                <div id="player-recommendations" class="flex overflow-x-auto space-x-4 pb-2 hide-scrollbar">
                    <!-- Recommendations will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Mini Player -->
    <div id="mini-player" class="mini-player hidden">
        <div class="flex items-center">
            <img id="mini-album-art" src="https://via.placeholder.com/50" alt="Album Art" class="w-12 h-12 rounded-lg mr-3">
            <div class="flex-1 min-w-0">
                <div id="mini-title" class="font-semibold truncate-text">Station Name</div>
                <div id="mini-artist" class="text-sm text-gray-400 truncate-text">Country</div>
            </div>
            <div class="flex items-center space-x-2">
                <button id="mini-play-pause" class="bg-pink-500 hover:bg-pink-600 rounded-full w-8 h-8 flex items-center justify-center">
                    <i class="fas fa-play text-white text-sm"></i>
                </button>
                <button id="close-mini-player" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <div id="fab" class="fab">
        <i class="fas fa-plus"></i>
    </div>

    <!-- Quick Actions Menu -->
    <div id="quick-actions" class="quick-actions">
        <button class="quick-action-btn" id="quick-record">
            <i class="fas fa-record-vinyl"></i>
            <span>Record</span>
        </button>
        <button class="quick-action-btn" id="quick-equalizer">
            <i class="fas fa-sliders-h"></i>
            <span>Equalizer</span>
        </button>
        <button class="quick-action-btn" id="quick-playlist">
            <i class="fas fa-list-music"></i>
            <span>Playlist</span>
        </button>
    </div>

    <!-- Media Notification -->
    <div id="media-notification" class="media-notification">
        <img id="notification-album-art" src="https://via.placeholder.com/50" alt="Album Art">
        <div class="media-notification-content">
            <div id="notification-title" class="media-notification-title">Station Name</div>
            <div id="notification-artist" class="media-notification-artist">Country</div>
        </div>
        <button id="notification-close" class="media-notification-close">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <!-- Create Playlist Modal -->
    <div id="create-playlist-modal" class="playlist-modal">
        <div class="playlist-modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Create New Playlist</h3>
                <button class="modal-close" id="close-create-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="create-playlist-form">
                <div class="form-group">
                    <label class="form-label" for="playlist-name">Playlist Name</label>
                    <input type="text" id="playlist-name" class="form-input" placeholder="My Playlist" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="playlist-description">Description (Optional)</label>
                    <textarea id="playlist-description" class="form-input form-textarea" placeholder="Add a description"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Privacy</label>
                    <div class="flex flex-col space-y-2">
                        <label class="flex items-center">
                            <input type="radio" name="privacy" value="public" checked class="mr-2">
                            <span>Public - Anyone can see this playlist</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="privacy" value="private" class="mr-2">
                            <span>Private - Only you can see this playlist</span>
                        </label>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="modal-btn modal-btn-secondary" id="cancel-create">Cancel</button>
                    <button type="submit" class="modal-btn modal-btn-primary">Create</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add to Playlist Modal -->
    <div id="add-to-playlist-modal" class="playlist-modal">
        <div class="playlist-modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add to Playlist</h3>
                <button class="modal-close" id="close-add-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="playlist-select-modal" id="playlist-select-list">
                <!-- Playlists will be loaded here -->
            </div>
            
            <div class="modal-actions">
                <button type="button" class="modal-btn modal-btn-secondary" id="cancel-add">Cancel</button>
                <button type="button" class="modal-btn modal-btn-primary" id="confirm-add">Add</button>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation for Mobile -->
    <div class="lg:hidden fixed bottom-0 left-0 right-0 glass z-40">
        <div class="flex justify-around items-center py-3">
            <a href="#" data-page="home" class="nav-link-mobile flex flex-col items-center nav-active">
                <i class="fas fa-home text-xl mb-1"></i>
                <span class="text-xs">Home</span>
            </a>
            <a href="#" data-page="search" class="nav-link-mobile flex flex-col items-center text-gray-400">
                <i class="fas fa-search text-xl mb-1"></i>
                <span class="text-xs">Search</span>
            </a>
            <a href="#" data-page="favorite" class="nav-link-mobile flex flex-col items-center text-gray-400">
                <i class="fas fa-heart text-xl mb-1"></i>
                <span class="text-xs">Favorite</span>
            </a>
            <a href="#" data-page="recent" class="nav-link-mobile flex flex-col items-center text-gray-400">
                <i class="fas fa-history text-xl mb-1"></i>
                <span class="text-xs">Recent</span>
            </a>
            <a href="#" data-page="countries" class="nav-link-mobile flex flex-col items-center text-gray-400">
                <i class="fas fa-globe text-xl mb-1"></i>
                <span class="text-xs">Countries</span>
            </a>
        </div>
    </div>

    <script>
        // Global variables
        let audio = new Audio();
        let isPlaying = false;
        let currentStation = null;
        let stations = [];
        let playerExpanded = false;
        let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
        let recent = JSON.parse(localStorage.getItem('recent')) || [];
        let recentSearches = JSON.parse(localStorage.getItem('recentSearches')) || [];
        let currentPage = 'home';
        let currentSlide = 0;
        let slideInterval;
        let sleepTimer = null;
        let countries = [];
        let podcasts = [];
        let isRecording = false;
        let mediaRecorder;
        let recordedChunks = [];
        let currentTheme = 'default';
        let playlists = JSON.parse(localStorage.getItem('playlists')) || [];
        let selectedPlaylists = [];
        let stationToAdd = null;
        let isLowDevice = false; // Flag for low-end devices

        // DOM elements
        const capsulePlayer = document.getElementById('capsule-player');
        const fullPlayer = document.getElementById('full-player');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const fullPlayerPlayPause = document.getElementById('full-player-play-pause');
        const backToCapsule = document.getElementById('back-to-capsule');
        const nowPlayingTitle = document.getElementById('now-playing-title');
        const nowPlayingArtist = document.getElementById('now-playing-artist');
        const fullPlayerTitle = document.getElementById('full-player-title');
        const fullPlayerArtist = document.getElementById('full-player-artist');
        const albumArt = document.getElementById('album-art');
        const favoriteBtn = document.getElementById('favorite-btn');
        const fullPlayerFavoriteBtn = document.getElementById('full-player-favorite-btn');
        const progressBar = document.getElementById('progress-bar');
        const currentTime = document.getElementById('current-time');
        const totalTime = document.getElementById('total-time');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const searchInput = document.getElementById('search-input');
        const autocompleteDropdown = document.getElementById('autocomplete-dropdown');
        const searchResults = document.getElementById('search-results');
        const searchResultsContainer = document.getElementById('search-results-container');
        const recentSearchesContainer = document.getElementById('recent-searches-container');
        const browseAll = document.getElementById('browse-all');
        const playerRecommendations = document.getElementById('player-recommendations');
        const imageSlider = document.getElementById('image-slider');
        const sliderDots = document.getElementById('slider-dots');
        const sliderPrev = document.getElementById('slider-prev');
        const sliderNext = document.getElementById('slider-next');
        const sleepTimerBtn = document.getElementById('sleep-timer-btn');
        const sleepTimerOptions = document.getElementById('sleep-timer-options');
        const sleepTimerText = document.getElementById('sleep-timer-text');
        const volumeSlider = document.getElementById('volume-slider');
        const volumeValue = document.getElementById('volume-value');
        const shareBtn = document.getElementById('share-btn');
        const mediaNotification = document.getElementById('media-notification');
        const notificationClose = document.getElementById('notification-close');
        const countrySelect = document.getElementById('country-select');
        const countryStations = document.getElementById('country-stations');
        const noCountryStations = document.getElementById('no-country-stations');
        const backFromSeeAll = document.getElementById('back-from-see-all');
        const seeAllPage = document.getElementById('see-all-page');
        const seeAllTitle = document.getElementById('see-all-title');
        const seeAllStations = document.getElementById('see-all-stations');
        const miniPlayer = document.getElementById('mini-player');
        const miniAlbumArt = document.getElementById('mini-album-art');
        const miniTitle = document.getElementById('mini-title');
        const miniArtist = document.getElementById('mini-artist');
        const miniPlayPause = document.getElementById('mini-play-pause');
        const closeMiniPlayer = document.getElementById('close-mini-player');
        const fab = document.getElementById('fab');
        const quickActions = document.getElementById('quick-actions');
        const quickRecord = document.getElementById('quick-record');
        const quickEqualizer = document.getElementById('quick-equalizer');
        const quickPlaylist = document.getElementById('quick-playlist');
        const bassSlider = document.getElementById('bass-slider');
        const bassValue = document.getElementById('bass-value');
        const virtualizerSlider = document.getElementById('virtualizer-slider');
        const virtualizerValue = document.getElementById('virtualizer-value');
        const equalizerSlider = document.getElementById('equalizer-slider');
        const equalizerValue = document.getElementById('equalizer-value');
        const lyricsContainer = document.getElementById('lyrics-container');
        const lyricsText = document.getElementById('lyrics-text');
        const recordingIndicator = document.getElementById('recording-indicator');
        const stopRecording = document.getElementById('stop-recording');
        const themeOptions = document.querySelectorAll('.theme-option');
        const addToPlaylistBtn = document.getElementById('add-to-playlist-btn');
        const createNewPlaylistBtn = document.getElementById('create-new-playlist');
        const createPlaylistModal = document.getElementById('create-playlist-modal');
        const closeCreateModal = document.getElementById('close-create-modal');
        const cancelCreate = document.getElementById('cancel-create');
        const createPlaylistForm = document.getElementById('create-playlist-form');
        const addToPlaylistModal = document.getElementById('add-to-playlist-modal');
        const closeAddModal = document.getElementById('close-add-modal');
        const cancelAdd = document.getElementById('cancel-add');
        const confirmAdd = document.getElementById('confirm-add');
        const playlistSelectList = document.getElementById('playlist-select-list');
        const playlistContainer = document.getElementById('playlist-container');
        const noPlaylists = document.getElementById('no-playlists');
        const sidebarPlaylists = document.getElementById('sidebar-playlists');
        const interactiveBg = document.getElementById('interactive-bg');
        const particles = document.getElementById('particles');

        // Categories
        const categories = [
            { name: 'Pop', icon: 'fa-music', color: 'bg-pink-500' },
            { name: 'Rock', icon: 'fa-guitar', color: 'bg-red-500' },
            { name: 'Jazz', icon: 'fa-saxophone', color: 'bg-blue-500' },
            { name: 'Classical', icon: 'fa-violin', color: 'bg-purple-500' },
            { name: 'Electronic', icon: 'fa-headphones', color: 'bg-green-500' },
            { name: 'Hip Hop', icon: 'fa-microphone', color: 'bg-yellow-500' },
            { name: 'Country', icon: 'fa-hat-cowboy', color: 'bg-orange-500' },
            { name: 'News', icon: 'fa-newspaper', color: 'bg-gray-500' },
            { name: 'Sports', icon: 'fa-football-ball', color: 'bg-indigo-500' },
            { name: 'Talk', icon: 'fa-comments', color: 'bg-teal-500' }
        ];

        // Detect low-end devices
        function detectLowDevice() {
            // Check for reduced motion preference
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            
            // Check for low memory devices (approximate)
            const isLowMemory = navigator.deviceMemory < 4; // Less than 4GB RAM
            
            // Check for low number of CPU cores
            const isLowCores = navigator.hardwareConcurrency < 4; // Less than 4 cores
            
            // Check for slow network connection
            const isSlowNetwork = navigator.connection && 
                                 (navigator.connection.effectiveType === 'slow-2g' || 
                                  navigator.connection.effectiveType === '2g' || 
                                  navigator.connection.saveData === true);
            
            // If any of these conditions are true, consider it a low-end device
            isLowDevice = prefersReducedMotion || isLowMemory || isLowCores || isSlowNetwork;
            
            if (isLowDevice) {
                document.body.classList.add('low-device');
                // Disable resource-intensive features
                interactiveBg.style.display = 'none';
                particles.style.display = 'none';
            }
        }

        // Initialize app
        async function init() {
            // Detect device capabilities first
            detectLowDevice();
            
            await fetchRadioStations();
            await fetchCountries();
            await fetchPodcasts(); // Fetch podcasts from API
            displayCategories();
            displayBrowseAll();
            displayRecentSearches();
            updateFavoriteStations();
            updateRecentStations();
            setupNavigation();
            setupImageSlider();
            setupSleepTimer();
            setupVolumeControl();
            setupShareButton();
            setupMediaNotification();
            setupCountrySelector();
            setupSeeAllPage();
            setupMiniPlayer();
            setupFAB();
            setupQuickActions();
            setupAudioEffects();
            setupThemeToggle();
            setupPodcasts();
            setupSchedule();
            setupRecording();
            setupPlaylistModals();
            displayPlaylists();
            
            // Set initial volume
            audio.volume = 0.7;
            
            // Load user data
            loadUserData();
        }

        // Load user data
        function loadUserData() {
            const userData = JSON.parse(localStorage.getItem('userData')) || {
                name: 'User',
                email: 'user@example.com',
                favorites: 0,
                playlists: 0,
                hours: 0,
                streak: 0,
                stationsPlayed: 0,
                rank: 0
            };
            
            document.getElementById('user-name').textContent = userData.name;
            document.getElementById('profile-name').textContent = userData.name;
            document.getElementById('profile-email').textContent = userData.email;
            document.getElementById('profile-favorites').textContent = userData.favorites;
            document.getElementById('profile-playlists').textContent = userData.playlists;
            document.getElementById('profile-hours').textContent = userData.hours;
            document.getElementById('streak-count').textContent = userData.streak;
            document.getElementById('stations-count').textContent = userData.stationsPlayed;
            document.getElementById('hours-count').textContent = Math.floor(userData.hours / 60);
            document.getElementById('rank-count').textContent = `#${userData.rank}`;
            document.getElementById('listening-time').textContent = `${Math.floor(userData.hours / 60)}h ${userData.hours % 60}m`;
        }

        // Setup particles - only for high-end devices
        function setupParticles() {
            if (isLowDevice) return; // Skip on low-end devices
            
            const particlesContainer = document.getElementById('particles');
            
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (Math.random() * 20 + 10) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Setup theme toggle
        function setupThemeToggle() {
            themeOptions.forEach(option => {
                option.addEventListener('click', () => {
                    themeOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    currentTheme = option.dataset.theme;
                    applyTheme(currentTheme);
                });
            });
        }

        // Apply theme
        function applyTheme(theme) {
            const body = document.body;
            body.classList.remove('theme-default', 'theme-purple', 'theme-teal', 'theme-orange');
            body.classList.add(`theme-${theme}`);
        }

        // Setup podcasts
        function setupPodcasts() {
            displayPodcasts();
        }

        // Fetch podcasts from PodcastIndex API
        async function fetchPodcasts() {
            try {
                // Using a public API key for demo purposes
                // In production, you should use your own API key and keep it secure
                const apiKey = 'YOUR_API_KEY'; // Replace with your actual API key
                const apiSecret = 'YOUR_API_SECRET'; // Replace with your actual API secret
                
                // If no API key is provided, use sample data
                if (apiKey === 'YOUR_API_KEY' || apiSecret === 'YOUR_API_SECRET') {
                    console.warn('No API key provided, using sample podcast data');
                    podcasts = getSamplePodcasts();
                    displayPodcasts();
                    return;
                }
                
                // Generate auth headers for PodcastIndex API
                const authHeader = generatePodcastIndexAuth(apiKey, apiSecret);
                
                // Fetch trending podcasts
                const response = await fetch('https://api.podcastindex.org/api/1.0/podcasts/trending', {
                    headers: {
                        'User-Agent': 'YoubeRadio/1.0',
                        'Authorization': authHeader
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    podcasts = data.feeds.map(feed => ({
                        id: feed.id,
                        title: feed.title,
                        author: feed.author,
                        description: feed.description,
                        image: feed.image,
                        episodeCount: feed.episodeCount,
                        categories: feed.categories ? Object.keys(feed.categories) : []
                    }));
                    
                    displayPodcasts();
                } else {
                    console.error('Error fetching podcasts:', response.status);
                    // Fallback to sample data
                    podcasts = getSamplePodcasts();
                    displayPodcasts();
                }
            } catch (error) {
                console.error('Error fetching podcasts:', error);
                // Fallback to sample data
                podcasts = getSamplePodcasts();
                displayPodcasts();
            }
        }

        // Generate authentication header for PodcastIndex API
        function generatePodcastIndexAuth(apiKey, apiSecret) {
            const epoch = Math.round(Date.now() / 1000).toString();
            const hash = CryptoJS.SHA1(apiKey + apiSecret + epoch).toString();
            return `Key ${apiKey}, Hash ${hash}, Time ${epoch}`;
        }

        // Get sample podcast data for fallback
        function getSamplePodcasts() {
            return [
                {
                    id: 1,
                    title: "Tech Talk Daily",
                    author: "John Smith",
                    description: "Daily discussions about the latest in technology",
                    image: "https://via.placeholder.com/200",
                    episodeCount: 156,
                    categories: ["Technology"]
                },
                {
                    id: 2,
                    title: "Morning Comedy Show",
                    author: "Sarah Johnson",
                    description: "Start your day with a laugh",
                    image: "https://via.placeholder.com/200",
                    episodeCount: 89,
                    categories: ["Comedy"]
                },
                {
                    id: 3,
                    title: "Business Insights",
                    author: "Michael Brown",
                    description: "Strategies for business growth and success",
                    image: "https://via.placeholder.com/200",
                    episodeCount: 234,
                    categories: ["Business"]
                },
                {
                    id: 4,
                    title: "Health & Wellness",
                    author: "Dr. Emily White",
                    description: "Tips for a healthier lifestyle",
                    image: "https://via.placeholder.com/200",
                    episodeCount: 178,
                    categories: ["Health"]
                },
                {
                    id: 5,
                    title: "True Crime Stories",
                    author: "Detective James",
                    description: "Investigating the most intriguing criminal cases",
                    image: "https://via.placeholder.com/200",
                    episodeCount: 45,
                    categories: ["True Crime"]
                },
                {
                    id: 6,
                    title: "History Uncovered",
                    author: "Prof. Robert Lee",
                    description: "Exploring hidden chapters of history",
                    image: "https://via.placeholder.com/200",
                    episodeCount: 92,
                    categories: ["History"]
                }
            ];
        }

        // Display podcasts
        function displayPodcasts() {
            const podcastSection = document.getElementById('podcast-section');
            const podcastList = document.getElementById('podcast-list');
            
            podcastSection.innerHTML = '';
            podcastList.innerHTML = '';
            
            podcasts.forEach(podcast => {
                const podcastCard = createPodcastCard(podcast);
                podcastSection.appendChild(podcastCard);
                podcastList.appendChild(podcastCard.cloneNode(true));
            });
        }

        // Create podcast card
        function createPodcastCard(podcast) {
            const card = document.createElement('div');
            card.className = 'podcast-card';
            card.innerHTML = `
                <img src="${podcast.image || 'https://via.placeholder.com/200'}" alt="${podcast.title}" class="w-full h-40 object-cover rounded-lg mb-4">
                <h3 class="font-bold text-lg mb-1">${podcast.title}</h3>
                <p class="text-gray-400 text-sm mb-2">${podcast.author || 'Unknown Author'}</p>
                <div class="flex justify-between text-sm text-gray-500">
                    <span><i class="fas fa-tag mr-1"></i> ${podcast.categories ? podcast.categories[0] : 'General'}</span>
                    <span><i class="fas fa-podcast mr-1"></i> ${podcast.episodeCount || 0} episodes</span>
                </div>
                <button class="mt-4 w-full bg-pink-500 hover:bg-pink-600 py-2 rounded-lg transition-colors">
                    <i class="fas fa-play mr-2"></i> Play Latest
                </button>
            `;
            
            return card;
        }

        // Setup schedule
        function setupSchedule() {
            displaySchedule();
        }

        // Display schedule
        function displaySchedule() {
            const scheduleList = document.getElementById('schedule-list');
            
            // Sample schedule data
            const scheduleData = [
                {
                    time: "06:00 - 09:00",
                    station: "Morning Show",
                    host: "Alex Johnson",
                    description: "Start your day with the latest news and hit songs"
                },
                {
                    time: "09:00 - 12:00",
                    station: "Work Hours",
                    host: "Sarah Williams",
                    description: "Perfect music to keep you productive"
                },
                {
                    time: "12:00 - 15:00",
                    station: "Lunch Break",
                    host: "Mike Chen",
                    description: "Relaxing tunes for your lunch hour"
                },
                {
                    time: "15:00 - 18:00",
                    station: "Afternoon Drive",
                    host: "Jessica Brown",
                    description: "Energy boost for your commute home"
                },
                {
                    time: "18:00 - 21:00",
                    station: "Evening Mix",
                    host: "David Miller",
                    description: "The best mix for your evening"
                },
                {
                    time: "21:00 - 00:00",
                    station: "Night Vibes",
                    host: "Emma Davis",
                    description: "Chill music to end your day"
                }
            ];
            
            scheduleList.innerHTML = '';
            
            scheduleData.forEach(item => {
                const scheduleCard = document.createElement('div');
                scheduleCard.className = 'schedule-card';
                scheduleCard.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <span class="font-semibold text-pink-400">${item.time}</span>
                        <span class="text-sm text-gray-400">${item.station}</span>
                    </div>
                    <h4 class="font-semibold mb-1">${item.host}</h4>
                    <p class="text-sm text-gray-400">${item.description}</p>
                `;
                scheduleList.appendChild(scheduleCard);
            });
        }

        // Setup recording
        function setupRecording() {
            quickRecord.addEventListener('click', toggleRecording);
            stopRecording.addEventListener('click', stopRecordingFunction);
        }

        // Toggle recording
        function toggleRecording() {
            if (!isRecording) {
                startRecording();
            } else {
                stopRecordingFunction();
            }
        }

        // Start recording
        function startRecording() {
            if (!currentStation) {
                showNotification('Please select a station first');
                return;
            }
            
            isRecording = true;
            recordedChunks = [];
            
            // Create media recorder
            const stream = audio.captureStream();
            mediaRecorder = new MediaRecorder(stream);
            
            mediaRecorder.ondataavailable = (event) => {
                if (event.data.size > 0) {
                    recordedChunks.push(event.data);
                }
            };
            
            mediaRecorder.onstop = () => {
                const blob = new Blob(recordedChunks, { type: 'audio/webm' });
                const url = URL.createObjectURL(blob);
                
                // Create download link
                const a = document.createElement('a');
                a.href = url;
                a.download = `${currentStation.name}-${new Date().toISOString().slice(0, 10)}.webm`;
                a.click();
                
                showNotification('Recording saved successfully');
            };
            
            mediaRecorder.start();
            recordingIndicator.style.display = 'block';
            quickRecord.innerHTML = '<i class="fas fa-stop"></i><span>Stop</span>';
        }

        // Stop recording
        function stopRecordingFunction() {
            if (mediaRecorder && mediaRecorder.state !== 'inactive') {
                mediaRecorder.stop();
                isRecording = false;
                recordingIndicator.style.display = 'none';
                quickRecord.innerHTML = '<i class="fas fa-record-vinyl"></i><span>Record</span>';
            }
        }

        // Setup mini player
        function setupMiniPlayer() {
            miniPlayPause.addEventListener('click', togglePlayPause);
            closeMiniPlayer.addEventListener('click', () => {
                miniPlayer.classList.add('hidden');
            });
        }

        // Show mini player
        function showMiniPlayer() {
            if (!currentStation) return;
            
            miniAlbumArt.src = currentStation.favicon || 'https://via.placeholder.com/50';
            miniTitle.textContent = currentStation.name;
            miniArtist.textContent = currentStation.country || 'Unknown';
            
            const icon = isPlaying ? 'fa-pause' : 'fa-play';
            miniPlayPause.innerHTML = `<i class="fas ${icon} text-white text-sm"></i>`;
            
            miniPlayer.classList.remove('hidden');
            
            // Auto hide after 5 seconds
            setTimeout(() => {
                miniPlayer.classList.add('hidden');
            }, 5000);
        }

        // Setup FAB
        function setupFAB() {
            fab.addEventListener('click', () => {
                quickActions.classList.toggle('show');
            });
        }

        // Setup quick actions
        function setupQuickActions() {
            quickRecord.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleRecording();
                quickActions.classList.remove('show');
            });
            
            quickEqualizer.addEventListener('click', (e) => {
                e.stopPropagation();
                if (!playerExpanded) {
                    expandPlayer();
                }
                quickActions.classList.remove('show');
            });
            
            quickPlaylist.addEventListener('click', (e) => {
                e.stopPropagation();
                showPage('playlist');
                quickActions.classList.remove('show');
            });
            
            // Close quick actions when clicking outside
            document.addEventListener('click', (e) => {
                if (!fab.contains(e.target) && !quickActions.contains(e.target)) {
                    quickActions.classList.remove('show');
                }
            });
        }

        // Setup audio effects
        function setupAudioEffects() {
            bassSlider.addEventListener('input', (e) => {
                const value = e.target.value;
                bassValue.textContent = `${value}%`;
                // Apply bass boost effect
                audio.bassBoost = value / 100;
            });
            
            virtualizerSlider.addEventListener('input', (e) => {
                const value = e.target.value;
                virtualizerValue.textContent = `${value}%`;
                // Apply virtualizer effect
                audio.virtualizer = value / 100;
            });
            
            equalizerSlider.addEventListener('input', (e) => {
                const value = e.target.value;
                equalizerValue.textContent = `${value}%`;
                // Apply equalizer effect
                audio.equalizer = value / 100;
            });
        }

        // Setup lyrics
        function setupLyrics() {
            // Simulate lyrics fetching
            if (currentStation) {
                // In a real app, this would fetch lyrics from an API
                const lyrics = [
                    "This is a sample lyrics display",
                    "For the radio station",
                    "In a real application",
                    "This would show actual lyrics",
                    "Or information about the current song"
                ];
                
                lyricsText.textContent = lyrics.join('\n');
            }
        }

        // Setup playlist modals
        function setupPlaylistModals() {
            createNewPlaylistBtn.addEventListener('click', () => {
                createPlaylistModal.classList.add('show');
            });
            
            closeCreateModal.addEventListener('click', () => {
                createPlaylistModal.classList.remove('show');
            });
            
            cancelCreate.addEventListener('click', () => {
                createPlaylistModal.classList.remove('show');
            });
            
            createPlaylistForm.addEventListener('submit', (e) => {
                e.preventDefault();
                createPlaylist();
            });
            
            addToPlaylistBtn.addEventListener('click', () => {
                if (!currentStation) {
                    showNotification('Please select a station first');
                    return;
                }
                
                stationToAdd = currentStation;
                displayPlaylistSelect();
                addToPlaylistModal.classList.add('show');
            });
            
            closeAddModal.addEventListener('click', () => {
                addToPlaylistModal.classList.remove('show');
            });
            
            cancelAdd.addEventListener('click', () => {
                addToPlaylistModal.classList.remove('show');
            });
            
            confirmAdd.addEventListener('click', () => {
                addStationToPlaylists();
            });
        }

        // Create playlist
        function createPlaylist() {
            const name = document.getElementById('playlist-name').value;
            const description = document.getElementById('playlist-description').value;
            const privacy = document.querySelector('input[name="privacy"]:checked').value;
            
            const newPlaylist = {
                id: Date.now().toString(),
                name,
                description,
                privacy,
                stations: [],
                createdAt: new Date().toISOString()
            };
            
            playlists.push(newPlaylist);
            localStorage.setItem('playlists', JSON.stringify(playlists));
            
            createPlaylistModal.classList.remove('show');
            createPlaylistForm.reset();
            
            displayPlaylists();
            showNotification('Playlist created successfully');
            
            // Update user data
            const userData = JSON.parse(localStorage.getItem('userData')) || {};
            userData.playlists = playlists.length;
            localStorage.setItem('userData', JSON.stringify(userData));
            loadUserData();
        }

        // Display playlists
        function displayPlaylists() {
            playlistContainer.innerHTML = '';
            sidebarPlaylists.innerHTML = '';
            noPlaylists.classList.add('hidden');
            
            if (playlists.length === 0) {
                noPlaylists.classList.remove('hidden');
                return;
            }
            
            playlists.forEach(playlist => {
                const playlistElement = createPlaylistElement(playlist);
                playlistContainer.appendChild(playlistElement);
                
                const sidebarPlaylist = createSidebarPlaylistElement(playlist);
                sidebarPlaylists.appendChild(sidebarPlaylist);
            });
        }

        // Create playlist element
        function createPlaylistElement(playlist) {
            const playlistDiv = document.createElement('div');
            playlistDiv.className = 'playlist-container';
            playlistDiv.dataset.id = playlist.id;
            
            const header = document.createElement('div');
            header.className = 'playlist-header';
            
            const title = document.createElement('h3');
            title.className = 'playlist-title';
            title.textContent = playlist.name;
            
            const actions = document.createElement('div');
            actions.className = 'playlist-actions';
            
            const playBtn = document.createElement('button');
            playBtn.className = 'playlist-btn';
            playBtn.innerHTML = '<i class="fas fa-play"></i>';
            playBtn.title = 'Play';
            playBtn.addEventListener('click', () => {
                playPlaylist(playlist);
            });
            
            const editBtn = document.createElement('button');
            editBtn.className = 'playlist-btn';
            editBtn.innerHTML = '<i class="fas fa-edit"></i>';
            editBtn.title = 'Edit';
            editBtn.addEventListener('click', () => {
                editPlaylist(playlist);
            });
            
            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'playlist-btn';
            deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
            deleteBtn.title = 'Delete';
            deleteBtn.addEventListener('click', () => {
                deletePlaylist(playlist.id);
            });
            
            actions.appendChild(playBtn);
            actions.appendChild(editBtn);
            actions.appendChild(deleteBtn);
            
            header.appendChild(title);
            header.appendChild(actions);
            
            playlistDiv.appendChild(header);
            
            const itemsContainer = document.createElement('div');
            itemsContainer.className = 'playlist-items';
            
            if (playlist.stations.length === 0) {
                const emptyMessage = document.createElement('div');
                emptyMessage.className = 'text-gray-400 text-center py-4';
                emptyMessage.textContent = 'No stations in this playlist';
                itemsContainer.appendChild(emptyMessage);
            } else {
                playlist.stations.forEach((station, index) => {
                    const item = createPlaylistItem(station, index, playlist.id);
                    itemsContainer.appendChild(item);
                });
            }
            
            playlistDiv.appendChild(itemsContainer);
            
            return playlistDiv;
        }

        // Create sidebar playlist element
        function createSidebarPlaylistElement(playlist) {
            const li = document.createElement('li');
            li.className = 'mb-2';
            
            const a = document.createElement('a');
            a.href = '#';
            a.className = 'flex items-center space-x-3 text-gray-400 hover:text-white transition-colors';
            a.innerHTML = `
                <i class="fas fa-list-music w-5"></i>
                <span>${playlist.name}</span>
            `;
            
            a.addEventListener('click', (e) => {
                e.preventDefault();
                showPage('playlist');
            });
            
            li.appendChild(a);
            return li;
        }

        // Create playlist item
        function createPlaylistItem(station, index, playlistId) {
            const item = document.createElement('div');
            item.className = 'playlist-item';
            item.dataset.index = index;
            item.dataset.playlistId = playlistId;
            
            const img = document.createElement('img');
            img.className = 'playlist-item-img';
            img.src = station.favicon || 'https://via.placeholder.com/40';
            img.alt = station.name;
            
            const info = document.createElement('div');
            info.className = 'playlist-item-info';
            
            const title = document.createElement('div');
            title.className = 'playlist-item-title';
            title.textContent = station.name;
            
            const artist = document.createElement('div');
            artist.className = 'playlist-item-artist';
            artist.textContent = station.country || 'Unknown';
            
            info.appendChild(title);
            info.appendChild(artist);
            
            const duration = document.createElement('div');
            duration.className = 'playlist-item-duration';
            duration.textContent = '--:--';
            
            const removeBtn = document.createElement('button');
            removeBtn.className = 'playlist-item-remove';
            removeBtn.innerHTML = '<i class="fas fa-times"></i>';
            removeBtn.title = 'Remove';
            removeBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                removeStationFromPlaylist(playlistId, index);
            });
            
            item.appendChild(img);
            item.appendChild(info);
            item.appendChild(duration);
            item.appendChild(removeBtn);
            
            item.addEventListener('click', () => {
                playStation(station);
            });
            
            return item;
        }

        // Play playlist
        function playPlaylist(playlist) {
            if (playlist.stations.length === 0) {
                showNotification('This playlist is empty');
                return;
            }
            
            // Play the first station in the playlist
            playStation(playlist.stations[0]);
            showNotification(`Playing playlist: ${playlist.name}`);
        }

        // Edit playlist
        function editPlaylist(playlist) {
            // In a real app, this would open an edit modal
            showNotification(`Edit playlist: ${playlist.name}`);
        }

        // Delete playlist
        function deletePlaylist(playlistId) {
            if (confirm('Are you sure you want to delete this playlist?')) {
                playlists = playlists.filter(p => p.id !== playlistId);
                localStorage.setItem('playlists', JSON.stringify(playlists));
                displayPlaylists();
                showNotification('Playlist deleted successfully');
                
                // Update user data
                const userData = JSON.parse(localStorage.getItem('userData')) || {};
                userData.playlists = playlists.length;
                localStorage.setItem('userData', JSON.stringify(userData));
                loadUserData();
            }
        }

        // Display playlist select
        function displayPlaylistSelect() {
            playlistSelectList.innerHTML = '';
            selectedPlaylists = [];
            
            if (playlists.length === 0) {
                const emptyMessage = document.createElement('div');
                emptyMessage.className = 'text-center py-8 text-gray-400';
                emptyMessage.textContent = 'No playlists available';
                playlistSelectList.appendChild(emptyMessage);
                return;
            }
            
            playlists.forEach(playlist => {
                const item = document.createElement('div');
                item.className = 'playlist-select-item';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.className = 'playlist-select-checkbox';
                checkbox.id = `playlist-${playlist.id}`;
                checkbox.dataset.id = playlist.id;
                
                const label = document.createElement('label');
                label.className = 'playlist-select-info';
                label.htmlFor = `playlist-${playlist.id}`;
                
                const title = document.createElement('div');
                title.className = 'playlist-select-title';
                title.textContent = playlist.name;
                
                const count = document.createElement('div');
                count.className = 'playlist-select-count';
                count.textContent = `${playlist.stations.length} stations`;
                
                label.appendChild(title);
                label.appendChild(count);
                
                item.appendChild(checkbox);
                item.appendChild(label);
                
                checkbox.addEventListener('change', (e) => {
                    if (e.target.checked) {
                        selectedPlaylists.push(playlist.id);
                    } else {
                        selectedPlaylists = selectedPlaylists.filter(id => id !== playlist.id);
                    }
                });
                
                playlistSelectList.appendChild(item);
            });
        }

        // Add station to playlists
        function addStationToPlaylists() {
            if (selectedPlaylists.length === 0) {
                showNotification('Please select at least one playlist');
                return;
            }
            
            selectedPlaylists.forEach(playlistId => {
                const playlist = playlists.find(p => p.id === playlistId);
                if (playlist && !playlist.stations.some(s => s.stationuuid === stationToAdd.stationuuid)) {
                    playlist.stations.push(stationToAdd);
                }
            });
            
            localStorage.setItem('playlists', JSON.stringify(playlists));
            
            addToPlaylistModal.classList.remove('show');
            displayPlaylists();
            showNotification(`Station added to ${selectedPlaylists.length} playlist${selectedPlaylists.length > 1 ? 's' : ''}`);
        }

        // Remove station from playlist
        function removeStationFromPlaylist(playlistId, stationIndex) {
            const playlist = playlists.find(p => p.id === playlistId);
            if (playlist) {
                playlist.stations.splice(stationIndex, 1);
                localStorage.setItem('playlists', JSON.stringify(playlists));
                displayPlaylists();
                showNotification('Station removed from playlist');
            }
        }

        // Fetch radio stations from API
        async function fetchRadioStations() {
            try {
                const response = await fetch('https://de1.api.radio-browser.info/json/stations/topvote/100');
                stations = await response.json();
                displayPopularStations(stations.slice(0, 8));
                displayGenreRecommendations();
                setupImageSliderData();
                displayLiveNow();
            } catch (error) {
                console.error('Error fetching radio stations:', error);
            }
        }

        // Display live now stations
        function displayLiveNow() {
            const liveNowContainer = document.getElementById('live-now');
            liveNowContainer.innerHTML = '';
            
            // Get some stations for live now section
            const liveStations = stations.slice(0, 4);
            
            liveStations.forEach(station => {
                const liveCard = document.createElement('div');
                liveCard.className = 'enhanced-card p-6';
                liveCard.innerHTML = `
                    <div class="flex items-center mb-4">
                        <div class="w-3 h-3 bg-red-500 rounded-full mr-3 animate-pulse"></div>
                        <span class="text-sm font-semibold text-red-400">LIVE</span>
                    </div>
                    <img src="${station.favicon || 'https://via.placeholder.com/100'}" alt="${station.name}" class="w-full h-32 object-cover rounded-lg mb-4">
                    <h3 class="font-bold text-lg mb-2">${station.name}</h3>
                    <p class="text-gray-400 text-sm mb-4">${station.country || 'Unknown'}</p>
                    <button class="w-full bg-pink-500 hover:bg-pink-600 py-2 rounded-lg transition-colors play-live-btn" data-station='${JSON.stringify(station)}'>
                        <i class="fas fa-play mr-2"></i> Listen Now
                    </button>
                `;
                
                const playBtn = liveCard.querySelector('.play-live-btn');
                playBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const station = JSON.parse(playBtn.dataset.station);
                    playStation(station);
                });
                
                liveNowContainer.appendChild(liveCard);
            });
        }

        // Fetch countries from API
        async function fetchCountries() {
            try {
                const response = await fetch('https://de1.api.radio-browser.info/json/countries');
                countries = await response.json();
                displayCountries();
            } catch (error) {
                console.error('Error fetching countries:', error);
            }
        }

        // Display countries in dropdown
        function displayCountries() {
            countrySelect.innerHTML = '<option value="">Select a country</option>';
            
            countries.forEach(country => {
                const option = document.createElement('option');
                option.value = country.name;
                option.textContent = country.name;
                countrySelect.appendChild(option);
            });
        }

        // Setup country selector
        function setupCountrySelector() {
            countrySelect.addEventListener('change', (e) => {
                const selectedCountry = e.target.value;
                if (selectedCountry) {
                    filterByCountry(selectedCountry);
                    showPage('countries');
                } else {
                    countryStations.innerHTML = '';
                    noCountryStations.classList.remove('hidden');
                }
            });
        }

        // Filter stations by country
        function filterByCountry(country) {
            const filtered = stations.filter(station => 
                station.country && station.country.toLowerCase() === country.toLowerCase()
            );
            
            countryStations.innerHTML = '';
            
            if (filtered.length === 0) {
                noCountryStations.classList.remove('hidden');
            } else {
                noCountryStations.classList.add('hidden');
                filtered.forEach(station => {
                    const stationCard = createStationCard(station);
                    countryStations.appendChild(stationCard);
                });
            }
        }

        // Setup See All page
        function setupSeeAllPage() {
            backFromSeeAll.addEventListener('click', () => {
                seeAllPage.classList.add('hidden');
                document.getElementById(`${currentPage}-page`).classList.remove('hidden');
            });
            
            // Handle "See All" links
            document.querySelectorAll('[data-page="see-all"]').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const type = link.dataset.type;
                    const genre = link.dataset.genre;
                    
                    document.getElementById(`${currentPage}-page`).classList.add('hidden');
                    seeAllPage.classList.remove('hidden');
                    
                    if (type === 'popular') {
                        seeAllTitle.textContent = 'Popular Stations';
                        displaySeeAllStations(stations);
                    } else if (genre) {
                        seeAllTitle.textContent = `${genre} Stations`;
                        const filteredStations = stations.filter(station => 
                            station.tags && station.tags.toLowerCase().includes(genre.toLowerCase())
                        );
                        displaySeeAllStations(filteredStations);
                    }
                });
            });
        }

        // Display stations on See All page
        function displaySeeAllStations(stationsToShow) {
            seeAllStations.innerHTML = '';
            
            stationsToShow.forEach(station => {
                const stationCard = createStationCard(station);
                seeAllStations.appendChild(stationCard);
            });
        }

        // Setup image slider
        function setupImageSlider() {
            // Auto-advance slides
            slideInterval = setInterval(() => {
                currentSlide = (currentSlide + 1) % stations.slice(0, 5).length;
                updateSlider();
            }, 5000);
            
            // Manual navigation
            sliderPrev.addEventListener('click', () => {
                currentSlide = (currentSlide - 1 + stations.slice(0, 5).length) % stations.slice(0, 5).length;
                updateSlider();
                clearInterval(slideInterval);
                slideInterval = setInterval(() => {
                    currentSlide = (currentSlide + 1) % stations.slice(0, 5).length;
                    updateSlider();
                }, 5000);
            });
            
            sliderNext.addEventListener('click', () => {
                currentSlide = (currentSlide + 1) % stations.slice(0, 5).length;
                updateSlider();
                clearInterval(slideInterval);
                slideInterval = setInterval(() => {
                    currentSlide = (currentSlide + 1) % stations.slice(0, 5).length;
                    updateSlider();
                }, 5000);
            });
        }

        // Setup image slider data
        function setupImageSliderData() {
            imageSlider.innerHTML = '';
            sliderDots.innerHTML = '';
            
            // Use top 5 stations for slider
            const sliderStations = stations.slice(0, 5);
            
            sliderStations.forEach((station, index) => {
                // Create slide
                const slide = document.createElement('div');
                slide.className = 'slide';
                slide.style.backgroundImage = `linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.7)), url(${station.favicon || 'https://via.placeholder.com/800x300'})`;
                
                const slideContent = document.createElement('div');
                slideContent.className = 'slide-content';
                slideContent.innerHTML = `
                    <h3 class="text-3xl font-bold mb-3">${station.name}</h3>
                    <p class="text-xl text-gray-300 mb-5">${station.country || 'Unknown'}</p>
                    <button class="bg-pink-500 hover:bg-pink-600 px-6 py-3 rounded-full text-lg font-semibold play-slide-btn" data-station='${JSON.stringify(station)}'>
                        <i class="fas fa-play mr-2"></i> Play Now
                    </button>
                `;
                
                slide.appendChild(slideContent);
                imageSlider.appendChild(slide);
                
                // Create dot
                const dot = document.createElement('div');
                dot.className = `dot ${index === 0 ? 'active' : ''}`;
                dot.addEventListener('click', () => {
                    currentSlide = index;
                    updateSlider();
                    clearInterval(slideInterval);
                    slideInterval = setInterval(() => {
                        currentSlide = (currentSlide + 1) % sliderStations.length;
                        updateSlider();
                    }, 5000);
                });
                sliderDots.appendChild(dot);
            });
            
            // Add event listeners to play buttons
            document.querySelectorAll('.play-slide-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const station = JSON.parse(btn.dataset.station);
                    playStation(station);
                });
            });
        }

        // Update slider position
        function updateSlider() {
            const slides = imageSlider.querySelectorAll('.slide');
            const dots = sliderDots.querySelectorAll('.dot');
            
            imageSlider.style.transform = `translateX(-${currentSlide * 100}%)`;
            
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }

        // Setup sleep timer
        function setupSleepTimer() {
            sleepTimerBtn.addEventListener('click', () => {
                sleepTimerOptions.classList.toggle('show');
            });
            
            document.querySelectorAll('.sleep-timer-option').forEach(option => {
                option.addEventListener('click', () => {
                    const minutes = parseInt(option.dataset.minutes);
                    
                    if (minutes === 0) {
                        // Turn off sleep timer
                        if (sleepTimer) {
                            clearTimeout(sleepTimer);
                            sleepTimer = null;
                        }
                        sleepTimerText.textContent = 'Sleep Timer';
                    } else {
                        // Set sleep timer
                        if (sleepTimer) {
                            clearTimeout(sleepTimer);
                        }
                        
                        sleepTimer = setTimeout(() => {
                            if (isPlaying) {
                                togglePlayPause();
                            }
                            sleepTimer = null;
                            sleepTimerText.textContent = 'Sleep Timer';
                        }, minutes * 60 * 1000);
                        
                        sleepTimerText.textContent = `Sleep: ${minutes} min`;
                    }
                    
                    sleepTimerOptions.classList.remove('show');
                });
            });
            
            // Close sleep timer options when clicking outside
            document.addEventListener('click', (e) => {
                if (!sleepTimerBtn.contains(e.target) && !sleepTimerOptions.contains(e.target)) {
                    sleepTimerOptions.classList.remove('show');
                }
            });
        }

        // Setup volume control
        function setupVolumeControl() {
            volumeSlider.addEventListener('input', (e) => {
                const volume = e.target.value;
                audio.volume = volume / 100;
                volumeValue.textContent = `${volume}%`;
            });
        }

        // Setup share button
        function setupShareButton() {
            shareBtn.addEventListener('click', () => {
                if (currentStation) {
                    if (navigator.share) {
                        navigator.share({
                            title: currentStation.name,
                            text: `Listen to ${currentStation.name} on Yoube Radio`,
                            url: window.location.href
                        });
                    } else {
                        // Fallback - copy to clipboard
                        const shareText = `Listen to ${currentStation.name} on Yoube Radio: ${window.location.href}`;
                        navigator.clipboard.writeText(shareText).then(() => {
                            showNotification('Link copied to clipboard!');
                        });
                    }
                }
            });
        }

        // Setup media notification
        function setupMediaNotification() {
            notificationClose.addEventListener('click', () => {
                mediaNotification.classList.remove('show');
            });
        }

        // Show media notification
        function showMediaNotification(station) {
            document.getElementById('notification-album-art').src = station.favicon || 'https://via.placeholder.com/50';
            document.getElementById('notification-title').textContent = station.name;
            document.getElementById('notification-artist').textContent = station.country || 'Unknown';
            
            mediaNotification.classList.add('show');
            
            // Auto hide after 5 seconds
            setTimeout(() => {
                mediaNotification.classList.remove('show');
            }, 5000);
        }

        // Show notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg z-50';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Setup Media Session API
        function setupMediaSession() {
            if ('mediaSession' in navigator) {
                navigator.mediaSession.metadata = new MediaMetadata({
                    title: currentStation.name,
                    artist: currentStation.country || 'Unknown',
                    album: 'Yoube Radio',
                    artwork: [
                        { src: currentStation.favicon || 'https://via.placeholder.com/96', sizes: '96x96', type: 'image/jpeg' },
                        { src: currentStation.favicon || 'https://via.placeholder.com/128', sizes: '128x128', type: 'image/jpeg' },
                        { src: currentStation.favicon || 'https://via.placeholder.com/192', sizes: '192x192', type: 'image/jpeg' },
                        { src: currentStation.favicon || 'https://via.placeholder.com/256', sizes: '256x256', type: 'image/jpeg' },
                        { src: currentStation.favicon || 'https://via.placeholder.com/384', sizes: '384x384', type: 'image/jpeg' },
                        { src: currentStation.favicon || 'https://via.placeholder.com/512', sizes: '512x512', type: 'image/jpeg' },
                    ]
                });
                
                navigator.mediaSession.setActionHandler('play', () => {
                    if (!isPlaying) {
                        togglePlayPause();
                    }
                });
                
                navigator.mediaSession.setActionHandler('pause', () => {
                    if (isPlaying) {
                        togglePlayPause();
                    }
                });
                
                navigator.mediaSession.setActionHandler('previoustrack', () => {
                    playPreviousStation();
                });
                
                navigator.mediaSession.setActionHandler('nexttrack', () => {
                    playNextStation();
                });
            }
        }

        // Display categories
        function displayCategories() {
            const categoriesContainer = document.getElementById('categories');
            categoriesContainer.innerHTML = '';
            
            categories.forEach(category => {
                const categoryCard = document.createElement('div');
                categoryCard.className = `category-card ${category.color} rounded-lg p-6 cursor-pointer`;
                categoryCard.innerHTML = `
                    <i class="fas ${category.icon} text-3xl mb-2"></i>
                    <h3 class="font-semibold">${category.name}</h3>
                `;
                categoryCard.addEventListener('click', () => filterByCategory(category.name));
                categoriesContainer.appendChild(categoryCard);
            });
        }

        // Display browse all categories
        function displayBrowseAll() {
            browseAll.innerHTML = '';
            
            categories.forEach(category => {
                const browseCard = document.createElement('div');
                browseCard.className = `${category.color} rounded-lg p-4 cursor-pointer hover:opacity-90 transition-opacity`;
                browseCard.innerHTML = `
                    <i class="fas ${category.icon} text-2xl mb-2"></i>
                    <h4 class="font-semibold">${category.name}</h4>
                `;
                browseCard.addEventListener('click', () => filterByCategory(category.name));
                browseAll.appendChild(browseCard);
            });
        }

        // Display popular stations
        function displayPopularStations(popularStations) {
            const container = document.getElementById('popular-stations');
            container.innerHTML = '';
            
            popularStations.forEach(station => {
                const stationCard = createStationCard(station);
                container.appendChild(stationCard);
            });
        }

        // Display genre recommendations
        function displayGenreRecommendations() {
            const container = document.getElementById('genre-recommendations');
            container.innerHTML = '';
            
            // Group stations by tags
            const genreGroups = {};
            stations.forEach(station => {
                if (station.tags) {
                    const tags = station.tags.split(',');
                    tags.forEach(tag => {
                        tag = tag.trim();
                        if (!genreGroups[tag]) {
                            genreGroups[tag] = [];
                        }
                        if (genreGroups[tag].length < 4) {
                            genreGroups[tag].push(station);
                        }
                    });
                }
            });
            
            // Display top 5 genres
            Object.keys(genreGroups).slice(0, 5).forEach(genre => {
                const genreSection = document.createElement('div');
                genreSection.innerHTML = `
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold">${genre}</h3>
                        <a href="#" data-page="see-all" data-genre="${genre}" class="text-sm text-gray-400 hover:text-white">SEE ALL</a>
                    </div>
                    <div class="responsive-grid">
                        ${genreGroups[genre].map(station => createStationCard(station).outerHTML).join('')}
                    </div>
                `;
                container.appendChild(genreSection);
            });
            
            // Add event listeners to "See All" links
            container.querySelectorAll('[data-page="see-all"]').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const genre = link.dataset.genre;
                    
                    document.getElementById(`${currentPage}-page`).classList.add('hidden');
                    seeAllPage.classList.remove('hidden');
                    seeAllTitle.textContent = `${genre} Stations`;
                    
                    const filteredStations = stations.filter(station => 
                        station.tags && station.tags.toLowerCase().includes(genre.toLowerCase())
                    );
                    
                    displaySeeAllStations(filteredStations);
                });
            });
        }

        // Create station card
        function createStationCard(station) {
            const card = document.createElement('div');
            card.className = 'station-card enhanced-card p-4';
            
            const logoUrl = station.favicon || 'https://via.placeholder.com/100';
            const isFavorite = favorites.some(fav => fav.stationuuid === station.stationuuid);
            
            card.innerHTML = `
                <div class="flex items-center mb-3">
                    <img src="${logoUrl}" alt="${station.name}" class="w-12 h-12 rounded-lg mr-3">
                    <div class="flex-1 min-w-0">
                        <h4 class="font-semibold truncate-text">${station.name}</h4>
                        <p class="text-sm text-gray-400 truncate-text">${station.country || 'Unknown'}</p>
                    </div>
                    <button class="favorite-station-btn text-gray-400 hover:text-pink-500 flex-shrink-0" data-station='${JSON.stringify(station)}'>
                        <i class="${isFavorite ? 'fas' : 'far'} fa-heart"></i>
                    </button>
                </div>
                <div class="text-sm text-gray-400">
                    <p><i class="fas fa-signal mr-1"></i> ${Math.round(station.bitrate || 0)} kbps</p>
                </div>
            `;
            
            card.addEventListener('click', (e) => {
                if (!e.target.closest('.favorite-station-btn')) {
                    playStation(station);
                }
            });
            
            const favoriteBtn = card.querySelector('.favorite-station-btn');
            favoriteBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleFavorite(station);
            });
            
            return card;
        }

        // Create recommendation card for full player
        function createRecommendationCard(station) {
            const card = document.createElement('div');
            card.className = 'recommendation-card glass rounded-lg p-3 flex-shrink-0 w-40';
            
            const logoUrl = station.favicon || 'https://via.placeholder.com/100';
            
            card.innerHTML = `
                <img src="${logoUrl}" alt="${station.name}" class="w-full h-24 object-cover rounded-lg mb-2">
                <h4 class="font-semibold text-sm truncate-text">${station.name}</h4>
                <p class="text-xs text-gray-400 truncate-text">${station.country || 'Unknown'}</p>
            `;
            
            card.addEventListener('click', () => {
                playStation(station);
            });
            
            return card;
        }

        // Display recommendations in full player
        function displayPlayerRecommendations() {
            playerRecommendations.innerHTML = '';
            
            // Get recommendations based on current station's tags or country
            let recommendations = [];
            
            if (currentStation) {
                // Find stations with similar tags
                if (currentStation.tags) {
                    const currentTags = currentStation.tags.split(',').map(tag => tag.trim());
                    recommendations = stations.filter(station => {
                        if (station.stationuuid === currentStation.stationuuid) return false;
                        
                        if (station.tags) {
                            const stationTags = station.tags.split(',').map(tag => tag.trim());
                            return currentTags.some(tag => stationTags.includes(tag));
                        }
                        return false;
                    }).slice(0, 5);
                }
                
                // If not enough recommendations, use stations from same country
                if (recommendations.length < 5 && currentStation.country) {
                    const countryStations = stations.filter(station => {
                        if (station.stationuuid === currentStation.stationuuid) return false;
                        return station.country === currentStation.country;
                    });
                    
                    // Add unique stations
                    countryStations.forEach(station => {
                        if (!recommendations.some(r => r.stationuuid === station.stationuuid) && recommendations.length < 5) {
                            recommendations.push(station);
                        }
                    });
                }
            }
            
            // If still not enough, use popular stations
            if (recommendations.length < 5) {
                const popularStations = stations.filter(station => {
                    return !recommendations.some(r => r.stationuuid === station.stationuuid) && 
                           station.stationuuid !== (currentStation ? currentStation.stationuuid : null);
                }).slice(0, 5 - recommendations.length);
                
                recommendations = [...recommendations, ...popularStations];
            }
            
            // Display recommendations
            recommendations.forEach(station => {
                const recommendationCard = createRecommendationCard(station);
                playerRecommendations.appendChild(recommendationCard);
            });
        }

        // Filter stations by category
        function filterByCategory(category) {
            const filtered = stations.filter(station => {
                return station.tags && station.tags.toLowerCase().includes(category.toLowerCase());
            });
            
            // Switch to search page and show results
            showPage('search');
            searchInput.value = category;
            displaySearchResults(filtered);
        }

        // Play a radio station
        function playStation(station) {
            currentStation = station;
            
            // Add to recent
            addToRecent(station);
            
            // Update player info
            nowPlayingTitle.textContent = station.name;
            nowPlayingArtist.textContent = station.country || 'Unknown';
            fullPlayerTitle.textContent = station.name;
            fullPlayerArtist.textContent = station.country || 'Unknown';
            
            // Update album art
            albumArt.src = station.favicon || 'https://via.placeholder.com/300';
            
            // Update favorite button
            updateFavoriteButton();
            
            // Load and play audio
            audio.src = station.url;
            audio.play().catch(e => {
                console.error('Error playing audio:', e);
                isPlaying = false;
                updatePlayPauseButton();
            });
            isPlaying = true;
            updatePlayPauseButton();
            
            // Update recommendations
            displayPlayerRecommendations();
            
            // Setup Media Session API
            setupMediaSession();
            
            // Show media notification
            showMediaNotification(station);
            
            // Setup lyrics
            setupLyrics();
            
            // Show mini player
            showMiniPlayer();
            
            // If player is not expanded, expand it
            if (!playerExpanded) {
                expandPlayer();
            }
            
            // Update user stats
            updateUserStats();
        }

        // Update user statistics
        function updateUserStats() {
            const userData = JSON.parse(localStorage.getItem('userData')) || {
                name: 'User',
                email: 'user@example.com',
                favorites: 0,
                playlists: 0,
                hours: 0,
                streak: 0,
                stationsPlayed: 0,
                rank: 0
            };
            
            userData.stationsPlayed++;
            userData.hours++;
            userData.favorites = favorites.length;
            
            // Update streak
            const lastPlayed = localStorage.getItem('lastPlayed');
            const today = new Date().toDateString();
            
            if (lastPlayed === today) {
                // Already played today
            } else if (lastPlayed === new Date(Date.now() - 86400000).toDateString()) {
                // Played yesterday, increase streak
                userData.streak++;
            } else {
                // Didn't play yesterday, reset streak
                userData.streak = 1;
            }
            
            localStorage.setItem('lastPlayed', today);
            localStorage.setItem('userData', JSON.stringify(userData));
            
            // Update UI
            loadUserData();
        }

        // Toggle favorite
        function toggleFavorite(station) {
            const index = favorites.findIndex(fav => fav.stationuuid === station.stationuuid);
            
            if (index > -1) {
                favorites.splice(index, 1);
            } else {
                favorites.push(station);
            }
            
            localStorage.setItem('favorites', JSON.stringify(favorites));
            updateFavoriteButton();
            updateFavoriteStations();
            
            // Update all favorite buttons in the current view
            document.querySelectorAll('.favorite-station-btn').forEach(btn => {
                const btnStation = JSON.parse(btn.dataset.station);
                const icon = btn.querySelector('i');
                if (btnStation.stationuuid === station.stationuuid) {
                    icon.className = favorites.some(fav => fav.stationuuid === station.stationuuid) ? 'fas fa-heart' : 'far fa-heart';
                }
            });
        }

        // Update favorite button
        function updateFavoriteButton() {
            if (!currentStation) return;
            
            const isFavorite = favorites.some(fav => fav.stationuuid === currentStation.stationuuid);
            favoriteBtn.innerHTML = `<i class="${isFavorite ? 'fas' : 'far'} fa-heart"></i>`;
            fullPlayerFavoriteBtn.innerHTML = `<i class="${isFavorite ? 'fas' : 'far'} fa-heart text-xl"></i>`;
        }

        // Add to recent
        function addToRecent(station) {
            // Remove if already exists
            recent = recent.filter(item => item.stationuuid !== station.stationuuid);
            
            // Add to beginning
            recent.unshift(station);
            
            // Keep only last 20
            if (recent.length > 20) {
                recent = recent.slice(0, 20);
            }
            
            localStorage.setItem('recent', JSON.stringify(recent));
            updateRecentStations();
        }

        // Update favorite stations display
        function updateFavoriteStations() {
            const container = document.getElementById('favorite-stations');
            const noFavorites = document.getElementById('no-favorites');
            
            if (favorites.length === 0) {
                container.innerHTML = '';
                noFavorites.classList.remove('hidden');
            } else {
                noFavorites.classList.add('hidden');
                container.innerHTML = '';
                favorites.forEach(station => {
                    const stationCard = createStationCard(station);
                    container.appendChild(stationCard);
                });
            }
        }

        // Update recent stations display
        function updateRecentStations() {
            const container = document.getElementById('recent-stations');
            const noRecent = document.getElementById('no-recent');
            
            if (recent.length === 0) {
                container.innerHTML = '';
                noRecent.classList.remove('hidden');
            } else {
                noRecent.classList.add('hidden');
                container.innerHTML = '';
                recent.forEach(station => {
                    const recentItem = document.createElement('div');
                    recentItem.className = 'station-card glass rounded-lg p-4 flex items-center cursor-pointer';
                    
                    const logoUrl = station.favicon || 'https://via.placeholder.com/100';
                    
                    recentItem.innerHTML = `
                        <img src="${logoUrl}" alt="${station.name}" class="w-16 h-16 rounded-lg mr-4">
                        <div class="flex-1 min-w-0">
                            <h4 class="font-semibold truncate-text">${station.name}</h4>
                            <p class="text-sm text-gray-400 truncate-text">${station.country || 'Unknown'}</p>
                        </div>
                        <button class="play-recent-btn bg-pink-500 hover:bg-pink-600 rounded-full w-10 h-10 flex items-center justify-center flex-shrink-0" data-station='${JSON.stringify(station)}'>
                            <i class="fas fa-play text-white"></i>
                        </button>
                    `;
                    
                    recentItem.addEventListener('click', (e) => {
                        if (!e.target.closest('.play-recent-btn')) {
                            playStation(station);
                        }
                    });
                    
                    const playBtn = recentItem.querySelector('.play-recent-btn');
                    playBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        playStation(station);
                    });
                    
                    container.appendChild(recentItem);
                });
            }
        }

        // Search functionality
        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            
            if (query.length === 0) {
                autocompleteDropdown.classList.add('hidden');
                searchResults.classList.add('hidden');
                return;
            }
            
            // Filter stations
            const filtered = stations.filter(station => 
                station.name.toLowerCase().includes(query) ||
                (station.country && station.country.toLowerCase().includes(query)) ||
                (station.tags && station.tags.toLowerCase().includes(query))
            );
            
            // Show autocomplete dropdown
            if (filtered.length > 0) {
                autocompleteDropdown.innerHTML = '';
                filtered.slice(0, 5).forEach(station => {
                    const item = document.createElement('div');
                    item.className = 'p-3 hover:bg-gray-700 cursor-pointer flex items-center';
                    item.innerHTML = `
                        <img src="${station.favicon || 'https://via.placeholder.com/40'}" alt="${station.name}" class="w-10 h-10 rounded mr-3">
                        <div class="min-w-0 flex-1">
                            <div class="font-semibold truncate-text">${station.name}</div>
                            <div class="text-sm text-gray-400 truncate-text">${station.country || 'Unknown'}</div>
                        </div>
                    `;
                    item.addEventListener('click', () => {
                        searchInput.value = station.name;
                        addToRecentSearches(station.name);
                        displaySearchResults([station]);
                        autocompleteDropdown.classList.add('hidden');
                    });
                    autocompleteDropdown.appendChild(item);
                });
                autocompleteDropdown.classList.remove('hidden');
            } else {
                autocompleteDropdown.classList.add('hidden');
            }
        });

        // Display search results
        function displaySearchResults(results) {
            searchResults.classList.remove('hidden');
            searchResultsContainer.innerHTML = '';
            
            if (results.length === 0) {
                searchResultsContainer.innerHTML = '<p class="text-gray-400">No results found</p>';
                return;
            }
            
            results.forEach(station => {
                const resultItem = document.createElement('div');
                resultItem.className = 'glass rounded-lg p-4 flex items-center cursor-pointer hover:bg-gray-700';
                
                const logoUrl = station.favicon || 'https://via.placeholder.com/100';
                const isFavorite = favorites.some(fav => fav.stationuuid === station.stationuuid);
                
                resultItem.innerHTML = `
                    <img src="${logoUrl}" alt="${station.name}" class="w-16 h-16 rounded-lg mr-4">
                    <div class="flex-1 min-w-0">
                        <h4 class="font-semibold truncate-text">${station.name}</h4>
                        <p class="text-sm text-gray-400 truncate-text">${station.country || 'Unknown'}</p>
                    </div>
                    <button class="favorite-result-btn text-gray-400 hover:text-pink-500 mr-3 flex-shrink-0" data-station='${JSON.stringify(station)}'>
                        <i class="${isFavorite ? 'fas' : 'far'} fa-heart"></i>
                    </button>
                    <button class="play-result-btn bg-pink-500 hover:bg-pink-600 rounded-full w-10 h-10 flex items-center justify-center flex-shrink-0" data-station='${JSON.stringify(station)}'>
                        <i class="fas fa-play text-white"></i>
                    </button>
                `;
                
                resultItem.addEventListener('click', (e) => {
                    if (!e.target.closest('.favorite-result-btn') && !e.target.closest('.play-result-btn')) {
                        playStation(station);
                    }
                });
                
                const favoriteBtn = resultItem.querySelector('.favorite-result-btn');
                favoriteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggleFavorite(station);
                });
                
                const playBtn = resultItem.querySelector('.play-result-btn');
                playBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    playStation(station);
                });
                
                searchResultsContainer.appendChild(resultItem);
            });
        }

        // Add to recent searches
        function addToRecentSearches(query) {
            recentSearches = recentSearches.filter(item => item !== query);
            recentSearches.unshift(query);
            
            if (recentSearches.length > 10) {
                recentSearches = recentSearches.slice(0, 10);
            }
            
            localStorage.setItem('recentSearches', JSON.stringify(recentSearches));
            displayRecentSearches();
        }

        // Display recent searches
        function displayRecentSearches() {
            recentSearchesContainer.innerHTML = '';
            
            recentSearches.forEach(search => {
                const searchTag = document.createElement('button');
                searchTag.className = 'glass px-4 py-2 rounded-full text-sm hover:bg-gray-700';
                searchTag.textContent = search;
                searchTag.addEventListener('click', () => {
                    searchInput.value = search;
                    searchInput.dispatchEvent(new Event('input'));
                });
                recentSearchesContainer.appendChild(searchTag);
            });
        }

        // Navigation
        function setupNavigation() {
            // Desktop navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = link.dataset.page;
                    showPage(page);
                    
                    // Update active state
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('nav-active'));
                    link.classList.add('nav-active');
                });
            });
            
            // Mobile navigation
            document.querySelectorAll('.nav-link-mobile').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = link.dataset.page;
                    showPage(page);
                    
                    // Update active state
                    document.querySelectorAll('.nav-link-mobile').forEach(l => {
                        l.classList.remove('nav-active');
                        l.classList.add('text-gray-400');
                    });
                    link.classList.add('nav-active');
                    link.classList.remove('text-gray-400');
                });
            });
        }

        // Show page
        function showPage(page) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            
            // Show selected page
            document.getElementById(`${page}-page`).classList.remove('hidden');
            
            currentPage = page;
            
            // Add capsule player adjustment for search page
            if (page === 'search') {
                document.getElementById('search-page').classList.add('capsule-player-adjusted');
            } else {
                document.getElementById('search-page').classList.remove('capsule-player-adjusted');
            }
        }

        // Toggle play/pause
        function togglePlayPause() {
            if (!currentStation) return;
            
            if (isPlaying) {
                audio.pause();
            } else {
                audio.play().catch(e => {
                    console.error('Error playing audio:', e);
                    isPlaying = false;
                    updatePlayPauseButton();
                });
            }
            isPlaying = !isPlaying;
            updatePlayPauseButton();
        }

        // Update play/pause button
        function updatePlayPauseButton() {
            const icon = isPlaying ? 'fa-pause' : 'fa-play';
            playPauseBtn.innerHTML = `<i class="fas ${icon} text-white"></i>`;
            fullPlayerPlayPause.innerHTML = `<i class="fas ${icon} text-white text-xl"></i>`;
            miniPlayPause.innerHTML = `<i class="fas ${icon} text-white text-sm"></i>`;
        }

        // Expand player to full screen
        function expandPlayer() {
            playerExpanded = true;
            capsulePlayer.classList.add('hidden');
            fullPlayer.classList.remove('hidden');
            fullPlayer.classList.add('capsule-to-full');
        }

        // Collapse player to capsule
        function collapsePlayer() {
            playerExpanded = false;
            fullPlayer.classList.add('hidden');
            capsulePlayer.classList.remove('hidden');
        }

        // Update progress bar
        function updateProgress() {
            if (audio.duration) {
                const progress = (audio.currentTime / audio.duration) * 100;
                progressBar.value = progress;
                
                currentTime.textContent = formatTime(audio.currentTime);
                totalTime.textContent = formatTime(audio.duration);
            }
        }

        // Format time (seconds to mm:ss)
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            return `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
        }

        // Set audio current time based on progress bar
        function setProgress() {
            const percent = progressBar.value;
            audio.currentTime = (percent / 100) * audio.duration;
        }

        // Play previous station
        function playPreviousStation() {
            if (!currentStation || stations.length === 0) return;
            
            const currentIndex = stations.findIndex(station => station.stationuuid === currentStation.stationuuid);
            const prevIndex = (currentIndex - 1 + stations.length) % stations.length;
            playStation(stations[prevIndex]);
        }

        // Play next station
        function playNextStation() {
            if (!currentStation || stations.length === 0) return;
            
            const currentIndex = stations.findIndex(station => station.stationuuid === currentStation.stationuuid);
            const nextIndex = (currentIndex + 1) % stations.length;
            playStation(stations[nextIndex]);
        }

        // Event listeners
        playPauseBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            togglePlayPause();
        });

        fullPlayerPlayPause.addEventListener('click', togglePlayPause);
        capsulePlayer.addEventListener('click', expandPlayer);
        backToCapsule.addEventListener('click', collapsePlayer);
        progressBar.addEventListener('input', setProgress);
        prevBtn.addEventListener('click', playPreviousStation);
        nextBtn.addEventListener('click', playNextStation);
        favoriteBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if (currentStation) {
                toggleFavorite(currentStation);
            }
        });
        fullPlayerFavoriteBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if (currentStation) {
                toggleFavorite(currentStation);
            }
        });

        // Update progress bar as audio plays
        audio.addEventListener('timeupdate', updateProgress);

        // Handle audio errors
        audio.addEventListener('error', () => {
            console.error('Error playing audio');
            isPlaying = false;
            updatePlayPauseButton();
        });

        // Swipe down to close full player (for touch devices)
        let touchStartY = 0;
        let touchEndY = 0;

        fullPlayer.addEventListener('touchstart', (e) => {
            touchStartY = e.changedTouches[0].screenY;
        });

        fullPlayer.addEventListener('touchend', (e) => {
            touchEndY = e.changedTouches[0].screenY;
            handleSwipe();
        });

        function handleSwipe() {
            if (touchEndY < touchStartY - 50) {
                // Swipe up
                return;
            }
            if (touchEndY > touchStartY + 50) {
                // Swipe down
                collapsePlayer();
            }
        }

        // Initialize app
        init();
    </script>
</body>
</html>
